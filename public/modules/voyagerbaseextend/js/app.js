!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=49)}(Array(49).concat([function(e,t,n){e.exports=n(50)},function(e,t,n){"use strict";n.r(t);n(51),n(53),n(55),n(57),n(59),n(61),n(63),n(65),n(67),n(69),n(71),n(72)},function(e,t,n){n(52)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},r=function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},o=function(e){return e.getParam("content_style","")},i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){var t="",n=e.dom.encode,r=o(e);t+='<base href="'+n(e.documentBaseURI.getURI())+'">',r&&(t+='<style type="text/css">'+r+"</style>"),i.each(e.contentCSS,function(r){t+='<link type="text/css" rel="stylesheet" href="'+n(e.documentBaseURI.toAbsolute(r))+'">'});var a=e.settings.body_id||"tinymce";-1!==a.indexOf("=")&&(a=(a=e.getParam("body_id","","hash"))[e.id]||a);var c=e.settings.body_class||"";-1!==c.indexOf("=")&&(c=(c=e.getParam("body_class","","hash"))[e.id]||"");var u=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+t+'</head><body id="'+n(a)+'" class="mce-content-body '+n(c)+'"'+n(u)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'},c=function(e,t,n){var r=a(e);if(n)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(r);else{var o=t.contentWindow.document;o.open(),o.write(r),o.close()}},u=function(e){var o=!t.ie,i='<iframe src="" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",a=n(e),u=r(e);e.windowManager.open({title:"Preview",width:a,height:u,html:i,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(t){var n=t.control.getEl("body").firstChild;c(e,n,o)}})},s=function(e){e.addCommand("mcePreview",function(){u(e)})},l=function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};e.add("preview",function(e){s(e),l(e)})}()},function(e,t,n){n(54)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("media_scripts")},o=function(e){return e.getParam("audio_template_callback")},i=function(e){return e.getParam("video_template_callback")},a=function(e){return e.getParam("media_live_embeds",!0)},c=function(e){return e.getParam("media_filter_html",!0)},u=function(e){return e.getParam("media_url_resolver")},s=function(e){return e.getParam("media_alt_source",!0)},l=function(e){return e.getParam("media_poster",!0)},d=function(e){return e.getParam("media_dimensions",!0)},f=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},p=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},g=function(e){return function(t,n){t&&(t.style[e]=function(e){return/^[0-9.]+$/.test(e)?e+"px":e}(n))}},v={getMaxWidth:p("maxWidth"),getMaxHeight:p("maxHeight"),setMaxWidth:g("maxWidth"),setMaxHeight:g("maxHeight")},y=m.DOM,b=function(e){return y.getAttrib(e,"data-ephox-embed-iri")},w=function(e,t){return function(e){var t=y.createFragment(e);return""!==b(t.firstChild)}(t)?function(e){var t=y.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:b(t),source2:"",poster:"",width:v.getMaxWidth(t),height:v.getMaxHeight(t)}}(t):function(e,t){var r={};return f({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,o){if(r.source1||"param"!==t||(r.source1=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=n.extend(o.map,r)),"script"===t){var i=h(e,o.map.src);if(!i)return;r={type:"script",source1:o.map.src,width:i.width,height:i.height}}"source"===t&&(r.source1?r.source2||(r.source2=o.map.src):r.source1=o.map.src),"img"!==t||r.poster||(r.poster=o.map.src)}}).parse(t),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r}(e,t)},x=tinymce.util.Tools.resolve("tinymce.util.Promise"),T=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t||""},I=tinymce.util.Tools.resolve("tinymce.html.Writer"),E=tinymce.util.Tools.resolve("tinymce.html.Schema"),S=m.DOM,C=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)(i=e[r]).name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},R=function(e,t){var n=S.createFragment(e).firstChild;return v.setMaxWidth(n,t.width),v.setMaxHeight(n,t.height),function(e){var t=I();return f(t).parse(e),t.getContent()}(n.outerHTML)},N=function(e,t,n){return function(e){var t=S.createFragment(e);return""!==S.getAttrib(t.firstChild,"data-ephox-embed-iri")}(e)?R(e,t):function(e,t,n){var r,o=I(),i=0;return f({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,a,c){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&C(a,{width:t.width,height:t.height})}if(n)switch(e){case"video":C(a,{poster:t.poster,src:""}),t.source2&&C(a,{src:""});break;case"iframe":C(a,{src:t.source1});break;case"source":if(++i<=2&&(C(a,{src:t["source"+i],type:t["source"+i+"mime"]}),!t["source"+i]))return;break;case"img":if(!t.poster)return;r=!0}o.start(e,a,c)},end:function(e){if("video"===e&&n)for(var a=1;a<=2;a++)if(t["source"+a]){var c=[];c.map={},i<a&&(C(c,{src:t["source"+a],type:t["source"+a+"mime"]}),o.start("source",c,!0))}if(t.poster&&"object"===e&&n&&!r){var u=[];u.map={},C(u,{src:t.poster,width:t.width,height:t.height}),o.start("img",u,!0)}o.end(e)}},E({})).parse(e),o.getContent()}(e,t,n)},k=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],A=function(e,t){for(var n=e.regex.exec(t),r=e.url,o=function(e){r=r.replace("$"+e,function(){return n[e]?n[e]:""})},i=0;i<n.length;i++)o(i);return r.replace(/\?$/,"")},M=function(e,t){var a=n.extend({},t);if(!a.source1&&(n.extend(a,w(r(e),a.embed)),!a.source1))return"";a.source2||(a.source2=""),a.poster||(a.poster=""),a.source1=e.convertURL(a.source1,"source"),a.source2=e.convertURL(a.source2,"source"),a.source1mime=T(a.source1),a.source2mime=T(a.source2),a.poster=e.convertURL(a.poster,"poster");var c=function(e){var t=k.filter(function(t){return t.regex.test(e)});return t.length>0?n.extend({},t[0],{url:A(t[0],e)}):null}(a.source1);if(c&&(a.source1=c.url,a.type=c.type,a.allowFullscreen=c.allowFullscreen,a.width=a.width||c.w,a.height=a.height||c.h),a.embed)return N(a.embed,a,!0);var u=h(r(e),a.source1);u&&(a.type="script",a.width=u.width,a.height=u.height);var s=o(e),l=i(e);return a.width=a.width||300,a.height=a.height||150,n.each(a,function(t,n){a[n]=e.dom.encode(t)}),"iframe"===a.type?function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"}(a):"application/x-shockwave-flash"===a.source1mime?function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"}(a):-1!==a.source1mime.indexOf("audio")?function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"}(a,s):"script"===a.type?function(e){return'<script src="'+e.source1+'"><\/script>'}(a):function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"}(a,l)},_={},O=function(e){return function(t){return M(e,t)}},D=function(e,t){var n=u(e);return n?function(e,t,n){return new x(function(r,o){var i=function(n){return n.html&&(_[e.source1]=n),r({url:e.source1,html:n.html?n.html:t(e)})};_[e.source1]?i(_[e.source1]):n({url:e.source1},i,o)})}(t,O(e),n):function(e,t){return new x(function(n){n({html:t(e),url:e.source1})})}(t,O(e))},P=function(e){return _.hasOwnProperty(e)},F=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},L=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},U=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),F(e,t)},B=function(e){L(e,U)},j=function(e){var t=function(){e(function(e){B(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},H=function(e){L(e,F)},z=B,G=t.ie&&t.ie<=8?"onChange":"onInput",W=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},$=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},q=function(e,t){return function(o){var i=o.html,a=e.find("#embed")[0],c=n.extend(w(r(t),i),{source1:o.url});e.fromJSON(c),a&&(a.value(i),z(e))}},V=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;r>=0;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])}(e,n),e.nodeChanged()},Y=function(e){var t,o,i=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){D(e,t.toJSON()).then(q(t,e)).catch(W(e))},1)},onchange:function(r){D(e,t.toJSON()).then(q(t,e)).catch(W(e)),function(e,t){n.each(t,function(t,n){e.find("#"+n).value(t)})}(t,r.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],a=[];if(s(e)&&a.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),l(e)&&a.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),d(e)){var c=j(function(e){e(t),o=t.toJSON(),t.find("#embed").value(N(o.embed,o))});i.push(c)}o=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:v.getMaxWidth(t),height:v.getMaxHeight(t)}:t.getAttribute("data-mce-object")?w(r(e),e.serializer.serialize(t,{selection:!0})):{}}(e);var u={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:$(e),multiline:!0,rows:5,label:"Source"};u[G]=function(){o=n.extend({},w(r(e),this.value())),this.parent().parent().fromJSON(o)};var f=[{title:"General",type:"form",items:i},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},u]}];a.length>0&&f.push({title:"Advanced",type:"form",items:a}),t=e.windowManager.open({title:"Insert/edit media",data:o,bodyType:"tabpanel",body:f,onSubmit:function(){z(t),function(e,t){var n=e.toJSON();n.embed=N(n.embed,n),n.embed&&P(n.source1)?V(t,n.embed):D(t,n).then(function(e){V(t,e.html)}).catch(W(t))}(t,e)}}),H(t)},J=function(e){return{showDialog:function(){Y(e)}}},X=function(e){e.addCommand("mceMedia",function(){Y(e)})},K=tinymce.util.Tools.resolve("tinymce.html.Node"),Z=function(e,t){if(!1===c(e))return t;var n,r=I();return f({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,o,i){if(n=!0,"script"!==t&&"noscript"!==t){for(var a=0;a<o.length;a++){if(0===o[a].name.indexOf("on"))return;"style"===o[a].name&&(o[a].value=e.dom.serializeStyle(e.dom.parseStyle(o[a].value),t))}r.start(t,o,i),n=!1}},end:function(e){n||r.end(e)}},E({})).parse(t),r.getContent()},Q=function(e,n){var r,o=n.name;return(r=new K("img",1)).shortEnded=!0,te(e,n,r),r.attr({width:n.attr("width")||"300",height:n.attr("height")||("audio"===o?"30":"150"),style:n.attr("style"),src:t.transparentSrc,"data-mce-object":o,class:"mce-object mce-object-"+o}),r},ee=function(e,t){var n,r,o,i=t.name;return(n=new K("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":i,class:"mce-preview-object mce-object-"+i}),te(e,t,n),(r=new K(i,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(o=new K("span",1)).attr("class","mce-shim"),n.append(r),n.append(o),n},te=function(e,t,n){var r,o,i,a,c;for(a=(i=t.attributes).length;a--;)r=i[a].name,o=i[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(c=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(Z(e,c))),n.firstChild=null)},ne=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},re=function(e){return function(n){for(var o,i,c=n.length;c--;)(o=n[c]).parent&&(o.parent.attr("data-mce-object")||("script"!==o.name||(i=h(r(e),o.attr("src"))))&&(i&&(i.width&&o.attr("width",i.width.toString()),i.height&&o.attr("height",i.height.toString())),"iframe"===o.name&&a(e)&&t.ceFalse?ne(o)||o.replace(ee(e,o)):ne(o)||o.replace(Q(e,o))))}},oe=function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();n.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var r=e.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){r[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",re(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,o,i,a,c,u,s,l,d=t.length;d--;)if((r=t[d]).parent){for(s=r.attr(n),o=new K(s,1),"audio"!==s&&"script"!==s&&((l=r.attr("class"))&&-1!==l.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),i=(a=r.attributes).length;i--;){var f=a[i].name;0===f.indexOf("data-mce-p-")&&o.attr(f.substr(11),a[i].value)}"script"===s&&o.attr("type","text/javascript"),(c=r.attr("data-mce-html"))&&((u=new K("#text",3)).raw=!0,u.value=Z(e,unescape(c)),o.append(u)),r.replace(o)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})},ie=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},ae=function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(N(t,{width:e.width,height:e.height}))))})},ce=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})};e.add("media",function(e){return X(e),ce(e),ie(e),oe(e),ae(e),J(e)})}()},function(e,t,n){n(56)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},r=function(e){return e.getParam("default_link_target","")},o=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},i=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,o(t,n)):e.setStartBefore(t)},a=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,o(t,n)):e.setEndAfter(t)},c=function(e,t,o){var c,u,s,l,d,f,m,h,p,g,v=n(e),y=r(e);if("A"!==e.selection.getNode().tagName){if((c=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(h=c.endContainer.previousSibling)){if(!c.endContainer.firstChild||!c.endContainer.firstChild.nextSibling)return;h=c.endContainer.firstChild.nextSibling}if(p=h.length,i(c,h,p),a(c,h,p),c.endOffset<5)return;u=c.endOffset,l=h}else{if(3!==(l=c.endContainer).nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(i(c,l,0),a(c,l,l.nodeValue.length))}u=1===c.endOffset?2:c.endOffset-1-t}s=u;do{i(c,l,u>=2?u-2:0),a(c,l,u>=1?u-1:0),u-=1,g=c.toString()}while(" "!==g&&""!==g&&160!==g.charCodeAt(0)&&u-2>=0&&g!==o);!function(e,t){return e===t||" "===e||160===e.charCodeAt(0)}(c.toString(),o)?0===c.startOffset?(i(c,l,0),a(c,l,s)):(i(c,l,u),a(c,l,s)):(i(c,l,u),a(c,l,s),u+=1),"."===(f=c.toString()).charAt(f.length-1)&&a(c,l,s-1),(m=(f=c.toString().trim()).match(v))&&("www."===m[1]?m[1]="http://www.":/@$/.test(m[1])&&!/^mailto:/.test(m[1])&&(m[1]="mailto:"+m[1]),d=e.selection.getBookmark(),e.selection.setRng(c),e.execCommand("createlink",!1,m[1]+m[2]),y&&e.dom.setAttrib(e.selection.getNode(),"target",y),e.selection.moveToBookmark(d),e.nodeChanged())}},u=function(e){var n;e.on("keydown",function(t){if(13===t.keyCode)return function(e){c(e,-1,"")}(e)}),t.ie?e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){if(41===t.keyCode)return function(e){c(e,-1,"(")}(e)}),e.on("keyup",function(t){if(32===t.keyCode)return function(e){c(e,0,"")}(e)}))};e.add("autolink",function(e){u(e)})}()},function(e,t,n){n(58)},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var o={findAndReplaceDOMText:function(e,t,n,o,i){var a,c,u,s,l,d,f=[],m=0;function h(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(u=t.ownerDocument,s=i.getBlockElements(),l=i.getWhiteSpaceElements(),d=i.getShortEndedElements(),c=function e(t){var n;if(3===t.nodeType)return t.data;if(l[t.nodeName]&&!s[t.nodeName])return"";if(n="",r(t))return"\n";if((s[t.nodeName]||d[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(t)){if(e.global)for(;a=e.exec(c);)f.push(h(a,o));else a=c.match(e),f.push(h(a,o));return f.length&&(m=f.length,function(e,t,n){var o,i,a,c,u=[],f=0,m=e,h=t.shift(),p=0;e:for(;;){if((s[m.nodeName]||d[m.nodeName]||r(m))&&f++,3===m.nodeType&&(!i&&m.length+f>=h[1]?(i=m,c=h[1]-f):o&&u.push(m),!o&&m.length+f>h[0]&&(o=m,a=h[0]-f),f+=m.length),o&&i){if(m=n({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:c,innerNodes:u,match:h[2],matchIndex:p}),f-=i.length-c,o=null,i=null,u=[],p++,!(h=t.shift()))break}else if(l[m.nodeName]&&!s[m.nodeName]||!m.firstChild){if(m.nextSibling){m=m.nextSibling;continue}}else if(!r(m)){m=m.firstChild;continue}for(;;){if(m.nextSibling){m=m.nextSibling;break}if(m.parentNode===e)break e;m=m.parentNode}}}(t,f,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:u.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(u.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,i=e.startNode,a=e.endNode,c=e.matchIndex;if(i===a){var s=i;o=s.parentNode,e.startNodeIndex>0&&(n=u.createTextNode(s.data.substring(0,e.startNodeIndex)),o.insertBefore(n,s));var l=t(e.match[0],c);return o.insertBefore(l,s),e.endNodeIndex<s.length&&(r=u.createTextNode(s.data.substring(e.endNodeIndex)),o.insertBefore(r,s)),s.parentNode.removeChild(s),l}n=u.createTextNode(i.data.substring(0,e.startNodeIndex)),r=u.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(i.data.substring(e.startNodeIndex),c),f=0,m=e.innerNodes.length;f<m;++f){var h=e.innerNodes[f],p=t(h.data,c);h.parentNode.replaceChild(p,h)}var g=t(a.data.substring(0,e.endNodeIndex),c);return(o=i.parentNode).insertBefore(n,i),o.insertBefore(d,i),o.removeChild(i),(o=a.parentNode).insertBefore(g,a),o.insertBefore(r,a),o.removeChild(a),g}}(n))),m}}},i=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},a=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},c=function(e,t){var r,o=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var a=0;a<r.length;a++){var c=i(r[a]);null!==c&&c.length&&c===t.toString()&&o.push(r[a])}return o},u=function(e,t,n){var r=t.get(),o=e.dom;(n=!1!==n)?r++:r--,o.removeClass(c(e,t.get()),"mce-match-marker-selected");var i=c(e,r);return i.length?(o.addClass(c(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(i[0]),r):-1},s=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},l=function(e,t){var n=u(e,t,!0);-1!==n&&t.set(n)},d=function(e,t){var n=u(e,t,!1);-1!==n&&t.set(n)},f=function(e){var t=i(e);return null!==t&&t.length>0},m=function(e,t,r){var o,c,u,s;for(c=n.toArray(e.getBody().getElementsByTagName("span")),o=0;o<c.length;o++){var l=i(c[o]);null!==l&&l.length&&(l===t.get().toString()&&(u||(u=c[o].firstChild),s=c[o].firstChild),a(c[o]))}if(u&&s){var d=e.dom.createRng();return d.setStart(u,0),d.setEnd(s,s.data.length),!1!==r&&e.selection.setRng(d),d}},h=function(e,t){return c(e,t.get()+1).length>0},p=function(e,t){return c(e,t.get()-1).length>0},g={done:m,find:function(e,t,n,r,i){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=i?"\\b"+n+"\\b":n;var a=function(e,t,n){var r,i;return(i=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),m(e,t,!1),o.findAndReplaceDOMText(n,r,i,!1,e.schema)}(e,t,new RegExp(n,r?"g":"gi"));return a&&(t.set(-1),t.set(u(e,t,!0))),a},next:l,prev:d,replace:function(e,t,r,o,c){var u,m,g,v,y,b,w=t.get();for(o=!1!==o,g=e.getBody(),m=n.grep(n.toArray(g.getElementsByTagName("span")),f),u=0;u<m.length;u++){var x=i(m[u]);if(v=y=parseInt(x,10),c||v===t.get()){for(r.length?(m[u].firstChild.nodeValue=r,a(m[u])):s(e.dom,m[u]);m[++u];){if((v=parseInt(i(m[u]),10))!==y){u--;break}s(e.dom,m[u])}o&&w--}else y>t.get()&&m[u].setAttribute("data-mce-index",y-1)}return t.set(w),o?(b=h(e,t),l(e,t)):(b=p(e,t),d(e,t)),!c&&b},hasNext:h,hasPrev:p},v=function(e,t){return{done:function(n){return g.done(e,t,n)},find:function(n,r,o){return g.find(e,t,n,r,o)},next:function(){return g.next(e,t)},prev:function(){return g.prev(e,t)},replace:function(n,r,o){return g.replace(e,t,n,r,o)}}},y=function(e,t){var r,o={};function i(){c.statusbar.find("#next").disabled(!1===g.hasNext(e,t)),c.statusbar.find("#prev").disabled(!1===g.hasPrev(e,t))}function a(){e.windowManager.alert("Could not find the specified string.",function(){c.find("#find")[0].focus()})}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var c=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),g.done(e,t),e.undoManager.add()},onSubmit:function(n){var r,u,s,l;return n.preventDefault(),u=c.find("#case").checked(),l=c.find("#words").checked(),(s=c.find("#find").value()).length?o.text===s&&o.caseState===u&&o.wholeWord===l?g.hasNext(e,t)?(g.next(e,t),void i()):void a():((r=g.find(e,t,s,u,l))||a(),c.statusbar.items().slice(1).disabled(0===r),i(),void(o={text:s,caseState:u,wholeWord:l})):(g.done(e,t,!1),void c.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){c.submit()}},{text:"Replace",disabled:!0,onclick:function(){g.replace(e,t,c.find("#replace").value())||(c.statusbar.items().slice(1).disabled(!0),t.set(-1),o={})}},{text:"Replace all",disabled:!0,onclick:function(){g.replace(e,t,c.find("#replace").value(),!0,!0),c.statusbar.items().slice(1).disabled(!0),o={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){g.prev(e,t),i()}},{text:"Next",name:"next",disabled:!0,onclick:function(){g.next(e,t),i()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},b=function(e,t){e.addCommand("SearchReplace",function(){y(e,t)})},w=function(e,t){return function(){y(e,t)}},x=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:w(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:w(e,t)}),e.shortcuts.add("Meta+F","",w(e,t))};t.add("searchreplace",function(t){var n=e(-1);return b(t,n),x(t,n),v(t,n)})}()},function(e,t,n){n(60)},function(e,t){!function(){"use strict";var e,t,n,r,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),c=tinymce.util.Tools.resolve("tinymce.Env"),u="[-'\\.‘’․﹒＇．]",s="[:··״‧︓﹕：]",l="[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",d="[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",f="\\r",m="\\n",h="[\v\f\u2028\u2029]",p="[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",g="[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",v="[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",y="[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",b="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",w={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp(u),new RegExp(s),new RegExp(l),new RegExp(d),new RegExp(f),new RegExp(m),new RegExp(h),new RegExp(p),new RegExp(g),new RegExp(v),new RegExp(y),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+b+"$"),WHITESPACE:/^\s+$/},x=function(e){return function(){return e}},T=x(!1),I=x(!0),E=function(){return S},S=(r={fold:function(e,t){return e()},is:T,isSome:T,isNone:I,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:E,ap:E,each:function(){},bind:E,flatten:E,exists:T,forall:I,filter:E,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:x("none()")},Object.freeze&&Object.freeze(r),r),C=(o="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===o}),R=(Array.prototype.slice,C(Array.from)&&Array.from,w.SETS),N=w.characterIndices.OTHER,k=function(e){var t,n,r=N,o=R.length;for(t=0;t<o;++t)if((n=R[t])&&n.test(e)){r=t;break}return r},A=function(e){var t,n,r=(t=k,n={},function(e){if(n[e])return n[e];var r=t(e);return n[e]=r,r});return function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}(e.split(""),r)},M=w.characterIndices,_=function(e,t){var n,r,o=e[t],i=e[t+1];return!(t<0||t>e.length-1&&0!==t||o===M.ALETTER&&i===M.ALETTER||(r=e[t+2],o===M.ALETTER&&(i===M.MIDLETTER||i===M.MIDNUMLET||i===M.AT)&&r===M.ALETTER||(n=e[t-1],(o===M.MIDLETTER||o===M.MIDNUMLET||i===M.AT)&&i===M.ALETTER&&n===M.ALETTER||!(o!==M.NUMERIC&&o!==M.ALETTER||i!==M.NUMERIC&&i!==M.ALETTER)||(o===M.MIDNUM||o===M.MIDNUMLET)&&i===M.NUMERIC&&n===M.NUMERIC||o===M.NUMERIC&&(i===M.MIDNUM||i===M.MIDNUMLET)&&r===M.NUMERIC||o===M.EXTEND||o===M.FORMAT||n===M.EXTEND||n===M.FORMAT||i===M.EXTEND||i===M.FORMAT||o===M.CR&&i===M.LF||o!==M.NEWLINE&&o!==M.CR&&o!==M.LF&&i!==M.NEWLINE&&i!==M.CR&&i!==M.LF&&(o===M.KATAKANA&&i===M.KATAKANA||i===M.EXTENDNUMLET&&(o===M.ALETTER||o===M.NUMERIC||o===M.KATAKANA||o===M.EXTENDNUMLET)||o===M.EXTENDNUMLET&&(i===M.ALETTER||i===M.NUMERIC||i===M.KATAKANA)||o===M.AT))))},O=w.EMPTY_STRING,D=w.WHITESPACE,P=w.PUNCTUATION,F=function(e){return"http"===e||"https"===e},L=function(e,t,n){var r=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(D.test(r))break}return n}(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},U=function(e,t){return function(e,t){var n,r,o,i=0,a=A(e),c=a.length,u=[],s=[];for(t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),r=t.includePunctuation,o=t.includeWhitespace;i<c;++i)if(n=e.charAt(i),u.push(n),_(a,i)){if((u=u.join(O))&&(o||!D.test(u))&&(r||!P.test(u)))if(F(u)){var l=L(u,e,i);s.push(l.word),i=l.index}else s.push(u);u=[]}return s}(e.replace(/\ufeff/g,""),t)},B=function(e,t){return c.ie?function(e,t){for(var n=t.getBlockElements(),r=t.getShortEndedElements(),o=t.getWhiteSpaceElements(),i=function(e){return n[e.nodeName]||r[e.nodeName]||o[e.nodeName]},c="",u=new a(e,e);e=u.next();)3===e.nodeType?c+=e.data:i(e)&&(c+=" ");return c}(e,t):e.innerText},j=function(e){return U(function(e){return e.removed?"":B(e.getBody(),e.schema)}(e)).length},H=function(e){return{getCount:function(){return j(e)}}},z=tinymce.util.Tools.resolve("tinymce.util.Delay"),G=tinymce.util.Tools.resolve("tinymce.util.I18n"),W=function(e){var t=function(e){return G.translate(["{0} words",j(e)])},n=function(){e.theme.panel.find("#wordcount").text(t(e))};e.on("init",function(){var r=e.theme.panel&&e.theme.panel.find("#statusbar")[0],o=z.debounce(n,300);r&&z.setEditorTimeout(e,function(){r.insert({type:"label",name:"wordcount",text:t(e),classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",o)},0)})};i.add("wordcount",function(e){return W(e),H(e)})}()},function(e,t,n){n(62)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},r=function(e){e.addCommand("ApplyUnorderedListStyle",function(t,r){n(e,"UL",r["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,r){n(e,"OL",r["list-style-type"])})},o=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},i=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},a=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},c=function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}},u=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},s=function(e){return t.map(e,function(e){return{text:function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}(e),data:"default"===e?"":e}})},l=function(e,n){return function(r){var o=r.control;e.on("NodeChange",function(r){var i=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(r.parents,a),u=-1!==i?r.parents.slice(0,i):r.parents,s=t.grep(u,c(e));o.active(s.length>0&&s[0].nodeName===n)})}},d=function(e){return function(t){var n=u(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}},f=function(e,t,r,o,i,a){a.length>0?function(e,t,r,o,i,a){e.addButton(t,{active:!1,type:"splitbutton",tooltip:r,menu:s(a),onPostRender:l(e,i),onshow:d(e),onselect:function(t){n(e,i,t.control.settings.data)},onclick:function(){e.execCommand(o)}})}(e,t,r,o,i,a):function(e,t,n,r,o,i){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:l(e,o),onclick:function(){e.execCommand(r)}})}(e,t,r,o,i)},m=function(e){f(e,"numlist","Numbered list","InsertOrderedList","OL",o(e)),f(e,"bullist","Bullet list","InsertUnorderedList","UL",i(e))};e.add("advlist",function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"lists")&&(m(e),r(e))})}()},function(e,t,n){n(64)},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},r=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},o=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},i=n,a=r,c=function(e){var t=r(e);return t.length>0?t[0]:n(e)},u=function(e){return e.getParam("insertdatetime_element",!1)},s="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),l="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f="January February March April May June July August September October November December".split(" "),m=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},h=function(e,t,n){return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",m(n.getMonth()+1,2))).replace("%d",m(n.getDate(),2))).replace("%H",""+m(n.getHours(),2))).replace("%M",""+m(n.getMinutes(),2))).replace("%S",""+m(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(f[n.getMonth()]))).replace("%b",""+e.translate(d[n.getMonth()]))).replace("%A",""+e.translate(l[n.getDay()]))).replace("%a",""+e.translate(s[n.getDay()]))).replace("%%","%")},p=function(e,t){if(u(e)){var n=h(e,t),r=void 0;r=/%[HMSIp]/.test(t)?h(e,"%Y-%m-%dT%H:%M"):h(e,"%Y-%m-%d");var o=e.dom.getParent(e.selection.getStart(),"time");o?function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)}(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(h(e,t))},g=h,v=function(e){e.addCommand("mceInsertDate",function(){p(e,o(e))}),e.addCommand("mceInsertTime",function(){p(e,i(e))})},y=tinymce.util.Tools.resolve("tinymce.util.Tools"),b=function(e,t){var n=function(e,t){var n=a(e);return y.map(n,function(n){return{text:g(e,n),onclick:function(){t.set(n),p(e,n)}}})}(e,t);e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:n,onclick:function(){var n=t.get();p(e,n||c(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:n,context:"insert"})};t.add("insertdatetime",function(t){var n=e(null);v(t),b(t,n)})}()},function(e,t,n){n(66)},function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools");function o(t,n){return a(e.document.createElement("canvas"),t,n)}function i(e){return e.getContext("2d")}function a(e,t,n){return e.width=t,e.height=n,e}var c={create:o,clone:function(e){var t;return i(t=o(e.width,e.height)).drawImage(e,0,0),t},resize:a,get2dContext:i,get3dContext:function(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}},u={getWidth:function(e){return e.naturalWidth||e.width},getHeight:function(e){return e.naturalHeight||e.height}},s=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,r(a,this),r(c,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){var t=this;null!==this._state?n(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(r(t,e),r(a,this),r(c,this))}this._state=!0,this._value=e,u.call(this)}catch(e){c.call(this,e)}}function c(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t(function(t,o){i.call(r,new s(e,n,t,o))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&o(arguments[0])?arguments[0]:arguments);return new t(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(e){o(i,e)},n)}e[i]=a,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},t}(),l=function(e){return function(){return e}};function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var f,m,h,p,g=l(!1),v=l(!0),y=g,b=v,w=function(){return x},x=(p={fold:function(e,t){return e()},is:y,isSome:y,isNone:b,getOr:h=function(e){return e},getOrThunk:m=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:h,orThunk:m,map:w,ap:w,each:function(){},bind:w,flatten:w,exists:y,forall:b,filter:w,equals:f=function(e){return e.isNone()},equals_:f,toArray:function(){return[]},toString:l("none()")},Object.freeze&&Object.freeze(p),p),T=function(e){var t=function(){return e},n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:b,isNone:y,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return T(t(e))},ap:function(t){return t.fold(w,function(t){return T(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?o:x},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(y,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},I={some:T,none:w,from:function(e){return null==e?x:T(e)}},E=void 0!==e.window?e.window:Function("return this;")(),S=function(e,t){return function(e,t){for(var n=null!=t?t:E,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)},C={getOrDie:function(e,t){var n=function(e,t){return S(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}};function R(){return new(C.getOrDie("FileReader"))}var N={atob:function(e){return C.getOrDie("atob")(e)},requestAnimationFrame:function(e){C.getOrDie("requestAnimationFrame")(e)}};function k(t){return new s(function(n,r){var o=e.URL.createObjectURL(t),i=new e.Image,a=function(){i.removeEventListener("load",c),i.removeEventListener("error",u)};function c(){a(),n(i)}function u(){a(),r("Unable to load data of type "+t.type+": "+o)}i.addEventListener("load",c),i.addEventListener("error",u),i.src=o,i.complete&&c()})}function A(t){return new s(function(n,r){var o=new e.XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200==this.status&&n(this.response)},o.onerror=function(){var e,t=this;r(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},o.send()})}function M(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return I.none();for(var r,o,i,a=n[1],c=t[1],u=N.atob(c),s=u.length,l=Math.ceil(s/1024),d=new Array(l),f=0;f<l;++f){for(var m=1024*f,h=Math.min(m+1024,s),p=new Array(h-m),g=m,v=0;g<h;++v,++g)p[v]=u[g].charCodeAt(0);d[f]=(r=p,new(C.getOrDie("Uint8Array"))(r))}return I.some((o=d,i={type:a},new(C.getOrDie("Blob"))(o,i)))}function _(e){return new s(function(t,n){M(e).fold(function(){n("uri is not base64: "+e)},t)})}function O(e){return new s(function(t){var n=R();n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}var D={blobToImage:k,imageToBlob:function(e){var t=e.src;return 0===t.indexOf("data:")?_(t):A(t)},blobToArrayBuffer:function(e){return new s(function(t){var n=R();n.onloadend=function(){t(n.result)},n.readAsArrayBuffer(e)})},blobToDataUri:O,blobToBase64:function(e){return O(e).then(function(e){return e.split(",")[1]})},dataUriToBlobSync:M,canvasToBlob:function(t,n,r){return n=n||"image/png",e.HTMLCanvasElement.prototype.toBlob?new s(function(e){t.toBlob(function(t){e(t)},n,r)}):_(t.toDataURL(n,r))},canvasToDataURL:function(e,t,n){return t=t||"image/png",e.then(function(e){return e.toDataURL(t,n)})},blobToCanvas:function(t){return k(t).then(function(t){var n;return function(t){e.URL.revokeObjectURL(t.src)}(t),n=c.create(u.getWidth(t),u.getHeight(t)),c.get2dContext(n).drawImage(t,0,0),n})},uriToBlob:function(e){return 0===e.indexOf("blob:")?A(e):0===e.indexOf("data:")?_(e):null}},P=function(e){return D.blobToImage(e)},F=function(e){return D.imageToBlob(e)};function L(e,t,n){var r=t.type;function o(t,n){return e.then(function(e){return D.canvasToDataURL(e,t,n)})}return{getType:l(r),toBlob:function(){return s.resolve(t)},toDataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(e){return D.canvasToBlob(e,t,n)})},toAdjustedDataURL:o,toAdjustedBase64:function(e,t){return o(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(c.clone)}}}function U(e){return D.blobToDataUri(e).then(function(t){return L(D.blobToCanvas(e),e,t)})}var B={fromBlob:U,fromCanvas:function(e,t){return D.canvasToBlob(e,t).then(function(t){return L(s.resolve(e),t,e.toDataURL())})},fromImage:function(e){return D.imageToBlob(e).then(function(e){return U(e)})},fromBlobAndUrlSync:function(e,t){return L(D.blobToCanvas(e),e,t)}};function j(e,t,n){return(e=parseFloat(e))>n?e=n:e<t&&(e=t),e}var H=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function z(e,t){var n,r,o,i,a=[],c=new Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(i=0,o=0;o<5;o++)i+=e[r+5*o]*a[o];c[r+5*n]=i}}return c}function G(e,t){return t=j(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,j(e,0,1)})}var W={identity:function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:G,multiply:z,adjustContrast:function(e,t){var n;return t=j(t,-1,1),z(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?H[t]:H[Math.floor(t)]*(1-n)+H[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(e,t){return z(e,[1,0,0,0,t=j(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(e,t){var n;return z(e,[.3086*(1-(n=1+((t=j(t,-1,1))>0?3*t:t)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(e,t){var n,r;return t=j(t,-180,180)/180*Math.PI,z(e,[.213+.787*(n=Math.cos(t))+-.213*(r=Math.sin(t)),.715+-.715*n+-.715*r,.072+-.072*n+.928*r,0,0,.213+-.213*n+.143*r,.715+n*(1-.715)+.14*r,.072+-.072*n+-.283*r,0,0,.213+-.213*n+-.787*r,.715+-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function(e,t,n,r){return z(e,[t=j(t,0,2),0,0,0,0,0,n=j(n,0,2),0,0,0,0,0,r=j(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(e,t){return z(e,G([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=j(t,0,1)))},adjustGrayscale:function(e,t){return z(e,G([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=j(t,0,1)))}};function $(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r,o=c.get2dContext(e);return r=function(e,t){var n,r,o,i,a,c=e.data,u=t[0],s=t[1],l=t[2],d=t[3],f=t[4],m=t[5],h=t[6],p=t[7],g=t[8],v=t[9],y=t[10],b=t[11],w=t[12],x=t[13],T=t[14],I=t[15],E=t[16],S=t[17],C=t[18],R=t[19];for(a=0;a<c.length;a+=4)n=c[a],r=c[a+1],o=c[a+2],i=c[a+3],c[a]=n*u+r*s+o*l+i*d+f,c[a+1]=n*m+r*h+o*p+i*g+v,c[a+2]=n*y+r*b+o*w+i*x+T,c[a+3]=n*I+r*E+o*S+i*C+R;return e}(o.getImageData(0,0,e.width,e.height),n),o.putImageData(r,0,0),B.fromCanvas(e,t)}(n,e.getType(),t)})}function q(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r,o,i=c.get2dContext(e);return r=i.getImageData(0,0,e.width,e.height),o=i.getImageData(0,0,e.width,e.height),o=function(e,t,n){var r,o,i,a,c,u,s,l,d,f,m,h,p,g,v,y,b;function w(e,t,n){return e>n?e=n:e<t&&(e=t),e}for(i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),r=e.data,o=t.data,y=e.width,b=e.height,u=0;u<b;u++)for(c=0;c<y;c++){for(s=l=d=0,m=0;m<i;m++)for(f=0;f<i;f++)h=w(c+f-a,0,y-1),p=w(u+m-a,0,b-1),g=4*(p*y+h),v=n[m*i+f],s+=r[g]*v,l+=r[g+1]*v,d+=r[g+2]*v;o[g=4*(u*y+c)]=w(s,0,255),o[g+1]=w(l,0,255),o[g+2]=w(d,0,255)}return t}(r,o,n),i.putImageData(o,0,0),B.fromCanvas(e,t)}(n,e.getType(),t)})}function V(e){return function(t,n){return t.toCanvas().then(function(r){return function(t,n,r){var o,i,a=c.get2dContext(t),u=new Array(256);for(i=0;i<u.length;i++)u[i]=e(i,r);return o=function(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}(a.getImageData(0,0,t.width,t.height),u),a.putImageData(o,0,0),B.fromCanvas(t,n)}(r,t.getType(),n)})}}function Y(e){return function(t,n){return $(t,e(W.identity(),n))}}function J(e){return function(t){return q(t,e)}}var X,K={invert:(X=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0],function(e){return $(e,X)}),brightness:Y(W.adjustBrightness),hue:Y(W.adjustHue),saturate:Y(W.adjustSaturation),contrast:Y(W.adjustContrast),grayscale:Y(W.adjustGrayscale),sepia:Y(W.adjustSepia),colorize:function(e,t,n,r){return $(e,W.adjustColors(W.identity(),t,n,r))},sharpen:J([0,-1,0,-1,5,-1,0,-1,0]),emboss:J([-2,-1,0,-1,1,1,0,1,2]),gamma:V(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:V(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:$,convoluteFilter:q},Z={scale:function e(t,n,r){var o=u.getWidth(t),i=u.getHeight(t),a=n/o,l=r/i,d=!1;(a<.5||a>2)&&(a=a<.5?.5:2,d=!0),(l<.5||l>2)&&(l=l<.5?.5:2,d=!0);var f=function(e,t,n){return new s(function(r){var o=u.getWidth(e),i=u.getHeight(e),a=Math.floor(o*t),s=Math.floor(i*n),l=c.create(a,s),d=c.get2dContext(l);d.drawImage(e,0,0,o,i,0,0,a,s),r(l)})}(t,a,l);return d?f.then(function(t){return e(t,n,r)}):f}},Q={rotate:function(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=c.create(e.width,e.height),o=c.get2dContext(r),i=0,a=0;return 90!=(n=n<0?360+n:n)&&270!=n||c.resize(r,r.height,r.width),90!=n&&180!=n||(i=r.width),270!=n&&180!=n||(a=r.height),o.translate(i,a),o.rotate(n*Math.PI/180),o.drawImage(e,0,0),B.fromCanvas(r,t)}(n,e.getType(),t)})},flip:function(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=c.create(e.width,e.height),o=c.get2dContext(r);return"v"==n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),B.fromCanvas(r,t)}(n,e.getType(),t)})},crop:function(e,t,n,r,o){return e.toCanvas().then(function(i){return function(e,t,n,r,o,i){var a=c.create(o,i);return c.get2dContext(a).drawImage(e,-n,-r),B.fromCanvas(a,t)}(i,e.getType(),t,n,r,o)})},resize:function(e,t,n){return e.toCanvas().then(function(r){return Z.scale(r,t,n).then(function(t){return B.fromCanvas(t,e.getType())})})}},ee=function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}return e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),r=0,o=0;r<t;r++)o|=this.readByteAt(e+r)<<Math.abs(n+8*r);return o},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var r=[],o=0;o<n;o++)r[o]=this[e](t+o);return r},e.prototype.length=function(){return this._dv?this._dv.byteLength:0},e}(),te={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},ne={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},re=function(){function e(e){if(this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={},this._reader=new ee(e),this._idx=this._offsets.tiffHeader,65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new Error("Exif data cannot be read or not available.");if(this._reader.littleEndian=18761==this.SHORT(this._idx),42!==this.SHORT(this._idx+=2))throw new Error("Invalid Exif data.");this._offsets.IFD0=this._offsets.tiffHeader+this.LONG(this._idx+=2),this._tiffTags=this.extractTags(this._offsets.IFD0,te.tiff),"ExifIFDPointer"in this._tiffTags&&(this._offsets.exifIFD=this._offsets.tiffHeader+this._tiffTags.ExifIFDPointer,delete this._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in this._tiffTags&&(this._offsets.gpsIFD=this._offsets.tiffHeader+this._tiffTags.GPSInfoIFDPointer,delete this._tiffTags.GPSInfoIFDPointer);var t=this.LONG(this._offsets.IFD0+12*this.SHORT(this._offsets.IFD0)+2);t&&(this._offsets.IFD1=this._offsets.tiffHeader+t)}return e.prototype.BYTE=function(e){return this._reader.BYTE(e)},e.prototype.SHORT=function(e){return this._reader.SHORT(e)},e.prototype.LONG=function(e){return this._reader.LONG(e)},e.prototype.SLONG=function(e){return this._reader.SLONG(e)},e.prototype.CHAR=function(e){return this._reader.CHAR(e)},e.prototype.STRING=function(e,t){return this._reader.STRING(e,t)},e.prototype.SEGMENT=function(e,t){return this._reader.SEGMENT(e,t)},e.prototype.asArray=function(e,t,n){for(var r=[],o=0;o<n;o++)r[o]=this[e](t+o);return r},e.prototype.length=function(){return this._reader.length()},e.prototype.UNDEFINED=function(){return this.BYTE.apply(this,arguments)},e.prototype.RATIONAL=function(e){return this.LONG(e)/this.LONG(e+4)},e.prototype.SRATIONAL=function(e){return this.SLONG(e)/this.SLONG(e+4)},e.prototype.ASCII=function(e){return this.CHAR(e)},e.prototype.TIFF=function(){return this._tiffTags},e.prototype.EXIF=function(){var e=null;if(this._offsets.exifIFD){try{e=this.extractTags(this._offsets.exifIFD,te.exif)}catch(e){return null}if(e.ExifVersion&&Array.isArray(e.ExifVersion)){for(var t=0,n="";t<e.ExifVersion.length;t++)n+=String.fromCharCode(e.ExifVersion[t]);e.ExifVersion=n}}return e},e.prototype.GPS=function(){var e=null;if(this._offsets.gpsIFD){try{e=this.extractTags(this._offsets.gpsIFD,te.gps)}catch(e){return null}e.GPSVersionID&&Array.isArray(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join("."))}return e},e.prototype.thumb=function(){if(this._offsets.IFD1)try{var e=this.extractTags(this._offsets.IFD1,te.thumb);if("JPEGInterchangeFormat"in e)return this.SEGMENT(this._offsets.tiffHeader+e.JPEGInterchangeFormat,e.JPEGInterchangeFormatLength)}catch(e){}return null},e.prototype.extractTags=function(e,t){var n,r,o,i,a,c,u,s,l=[],d={},f={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},m={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(n=this.SHORT(e),r=0;r<n;r++)if(l=[],u=e+2+12*r,void 0!==(o=t[this.SHORT(u)])){if(i=f[this.SHORT(u+=2)],a=this.LONG(u+=2),!(c=m[i]))throw new Error("Invalid Exif data.");if(u+=4,c*a>4&&(u=this.LONG(u)+this._offsets.tiffHeader),u+c*a>=this.length())throw new Error("Invalid Exif data.");"ASCII"!==i?(l=this.asArray(i,u,a),s=1==a?l[0]:l,ne.hasOwnProperty(o)&&"object"!=typeof s?d[o]=ne[o][s]:d[o]=s):d[o]=this.STRING(u,a).replace(/\0$/,"").trim()}return d},e}(),oe=function(e){var t,n,r=[],o=0;for(t=2;t<=e.length();)if((n=e.SHORT(t))>=65488&&n<=65495)t+=2;else{if(65498===n||65497===n)break;o=e.SHORT(t+2)+2,n>=65505&&n<=65519&&r.push({hex:n,name:"APP"+(15&n),start:t,length:o,segment:e.SEGMENT(t,o)}),t+=o}return r},ie=function(e){return D.blobToArrayBuffer(e).then(function(t){try{var n=new ee(t);if(65496===n.SHORT(0)){var r=oe(n),o=r.filter(function(e){return"APP1"===e.name}),i={};if(!o.length)return s.reject("Headers did not include required information");var a=new re(o[0].segment);return(i={tiff:a.TIFF(),exif:a.EXIF(),gps:a.GPS(),thumb:a.thumb()}).rawHeaders=r,i}return s.reject("Image was not a jpeg")}catch(t){return s.reject("Unsupported format or not an image: "+e.type+" (Exception: "+t.message+")")}})},ae=function(e,t){return Q.rotate(e,t)},ce={invert:function(e){return K.invert(e)},sharpen:function(e){return K.sharpen(e)},emboss:function(e){return K.emboss(e)},brightness:function(e,t){return K.brightness(e,t)},hue:function(e,t){return K.hue(e,t)},saturate:function(e,t){return K.saturate(e,t)},contrast:function(e,t){return K.contrast(e,t)},grayscale:function(e,t){return K.grayscale(e,t)},sepia:function(e,t){return K.sepia(e,t)},colorize:function(e,t,n,r){return K.colorize(e,t,n,r)},gamma:function(e,t){return K.gamma(e,t)},exposure:function(e,t){return K.exposure(e,t)},flip:function(e,t){return Q.flip(e,t)},crop:function(e,t,n,r,o){return Q.crop(e,t,n,r,o)},resize:function(e,t,n){return Q.resize(e,t,n)},rotate:ae,exifRotate:function(e){return e.toBlob().then(ie).then(function(t){switch(t.tiff.Orientation){case 6:return ae(e,90);case 3:return ae(e,180);case 8:return ae(e,270);default:return e}},function(){return e})}},ue=function(e){return e.toBlob()},se={blobToImageResult:function(e){return B.fromBlob(e)},fromBlobAndUrlSync:function(e,t){return B.fromBlobAndUrlSync(e,t)},imageToImageResult:function(e){return B.fromImage(e)},imageResultToBlob:function(e,t,n){return void 0===t&&void 0===n?ue(e):e.toAdjustedBlob(t,n)},imageResultToOriginalBlob:ue,imageResultToDataURL:function(e){return e.toDataURL()}},le=function(){return C.getOrDie("URL")},de={createObjectURL:function(e){return le().createObjectURL(e)},revokeObjectURL:function(e){le().revokeObjectURL(e)}},fe=tinymce.util.Tools.resolve("tinymce.util.Delay"),me=tinymce.util.Tools.resolve("tinymce.util.Promise"),he=tinymce.util.Tools.resolve("tinymce.util.URI"),pe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ge=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ve=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ye=function(e){return new me(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},be=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),we=tinymce.util.Tools.resolve("tinymce.util.Observable"),xe=tinymce.util.Tools.resolve("tinymce.util.VK"),Te=0,Ie={create:function(t){return new(ge.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(t){var n=this,r=new e.Image;r.src=t,ye(r).then(function(){var t,o,i=n.state.get("viewRect");if((o=n.$el.find("img"))[0])o.replaceWith(r);else{var a=e.document.createElement("div");a.className="mce-imagepanel-bg",n.getEl().appendChild(a),n.getEl().appendChild(r)}t={x:0,y:0,w:r.naturalWidth,h:r.naturalHeight},n.state.set("viewRect",t),n.state.set("rect",ve.inflate(t,-20,-20)),i&&i.w===t.w&&i.h===t.h||n.zoomFit(),n.repaintImage(),n.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i;e=this.$el.find("img"),t=this.getEl().clientWidth,n=this.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,(i=Math.min((t-10)/r,(n-10)/o))>=1&&(i=1),this.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,c,u,s,l;l=this.getEl(),u=this.zoom(),s=this.state.get("rect"),a=this.$el.find("img"),c=this.$el.find(".mce-imagepanel-bg"),o=l.offsetWidth,i=l.offsetHeight,n=a[0].naturalWidth*u,r=a[0].naturalHeight*u,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),c.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:s.x*u+e,y:s.y*u+t,w:s.w*u,h:s.h*u}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){var e=this;function t(t){e.cropRect=function(e,t,n,o,i){var a,c,u,s,l="mce-",d=l+"crid-"+Te++;function f(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(t,r,o,i){var c,u,s,l,d;c=r.x,u=r.y,s=r.w,l=r.h,c+=o*t.deltaX,u+=i*t.deltaY,(s+=o*t.deltaW)<20&&(s=20),(l+=i*t.deltaH)<20&&(l=20),d=e=ve.clamp({x:c,y:u,w:s,h:l},n,"move"===t.name),d=f(n,d),a.fire("updateRect",{rect:d}),g(d)}function h(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),be("#"+d+"-"+e,o).css({left:t.x,top:t.y,width:t.w,height:t.h})}r.each(c,function(t){be("#"+d+"-"+t.name,o).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function p(t){h(e=t)}function g(e){var t,r;p((t=n,{x:(r=e).x+t.x,y:r.y+t.y,w:r.w,h:r.h}))}return c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],be('<div id="'+d+'" class="'+l+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),r.each(s,function(e){be("#"+d,o).append('<div id="'+d+"-"+e+'"class="'+l+'croprect-block" style="display: none" data-mce-bogus="all">')}),r.each(c,function(e){be("#"+d,o).append('<div id="'+d+"-"+e.name+'" class="'+l+"croprect-handle "+l+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),u=r.map(c,function(t){var n;return new(ge.get("DragHelper"))(d,{document:o.ownerDocument,handle:d+"-"+t.name,start:function(){n=e},drag:function(e){m(t,n,e.deltaX,e.deltaY)}})}),h(e),be(o).on("focusin focusout",function(e){be(e.target).attr("aria-grabbed","focus"===e.type)}),be(o).on("keydown",function(t){var n;function o(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),m(n,r,o,i)}switch(r.each(c,function(e){if(t.target.id===d+"-"+e.name)return n=e,!1}),t.keyCode){case xe.LEFT:o(t,0,e,-10,0);break;case xe.RIGHT:o(t,0,e,10,0);break;case xe.UP:o(t,0,e,0,-10);break;case xe.DOWN:o(t,0,e,0,10);break;case xe.ENTER:case xe.SPACEBAR:t.preventDefault(),i()}}),a=r.extend({toggleVisibility:function(e){var t;t=r.map(c,function(e){return"#"+d+"-"+e.name}).concat(r.map(s,function(e){return"#"+d+"-"+e})).join(","),e?be(t,o).show():be(t,o).hide()},setClampRect:function(t){n=t,h(e)},setRect:p,getInnerRect:function(){return f(n,e)},setInnerRect:g,setViewPortRect:function(n){t=n,h(e)},destroy:function(){r.each(u,function(e){e.destroy()}),u=[]}},we)}(t,e.state.get("viewRect"),e.state.get("viewRect"),e.getEl(),function(){e.fire("crop")}),e.cropRect.on("updateRect",function(t){var n=t.rect,r=e.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},e.state.set("rect",n)}),e.on("remove",e.cropRect.destroy)}e.state.on("change:cropEnabled",function(t){e.cropRect.toggleVisibility(t.value),e.repaintImage()}),e.state.on("change:zoom",function(){e.repaintImage()}),e.state.on("change:rect",function(n){var r=n.value;e.cropRect||t(r),e.cropRect.setRect(r)})}}))(t)}};function Ee(e){return{blob:e,url:de.createObjectURL(e)}}function Se(e){e&&de.revokeObjectURL(e.url)}function Ce(e){r.each(e,Se)}function Re(e,t,n,o){var i,a,c,u,s,l,d,f,m,h,p,g,v,y,b,w,x,T,I,E,S,C,R,N,k,A,M,_=function(){var e=[],t=-1;function n(){return t>0}function r(){return-1!==t&&t<e.length-1}return{data:e,add:function(n){var r;return r=e.splice(++t),e.push(n),{state:n,removed:r}},undo:function(){if(n())return e[--t]},redo:function(){if(r())return e[++t]},canUndo:n,canRedo:r}}(),O=function(t){return e.rtl?t.reverse():t};function D(e){var t,n,r,o;t=i.find("#w")[0],n=i.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),i.find("#constrain")[0].checked()&&N&&k&&r&&o&&("w"===e.control.settings.name?(o=Math.round(r*A),n.value(o)):(r=Math.round(o*M),t.value(r))),N=r,k=o}function P(e){return Math.round(100*e)+"%"}function F(){i.find("#undo").disabled(!_.canUndo()),i.find("#redo").disabled(!_.canRedo()),i.statusbar.find("#save").disabled(!_.canUndo())}function L(){i.find("#undo").disabled(!0),i.find("#redo").disabled(!0)}function U(e){e&&f.imageSrc(e.url)}function B(e){return function(){var t=r.grep(R,function(t){return t.settings.name!==e});r.each(t,function(e){e.hide()}),e.show(),e.focus()}}function j(e){U(u=Ee(e))}function H(e){U(t=Ee(e)),Ce(_.add(t).removed),F()}function z(){var e=f.selection();se.blobToImageResult(t.blob).then(function(t){ce.crop(t,e.x,e.y,e.w,e.h).then(V).then(function(e){H(e),W()})})}var G=function(e){var n=[].slice.call(arguments,1);return function(){var r=u||t;se.blobToImageResult(r.blob).then(function(t){e.apply(this,[t].concat(n)).then(V).then(j)})}};function W(){U(t),Se(u),B(a)(),F()}function $(){u?(H(u.blob),W()):function t(n,r){u?r():setTimeout(function(){n-- >0?t(n,r):e.windowManager.alert("Error: failed to apply image operation.")},10)}(100,$)}function q(e){return ge.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}var V=function(e){return e.toBlob()};function Y(e,n){return q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",function(){L(),se.blobToImageResult(t.blob).then(function(e){return n(e)}).then(V).then(function(e){var t=Ee(e);U(t),Se(u),u=t})})}function J(n,r,o,i,a){return q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){!function(e){se.blobToImageResult(t.blob).then(function(t){return r(t,e)}).then(V).then(function(e){var t=Ee(e);U(t),Se(u),u=t})}(e.value)},minValue:e.rtl?a:i,maxValue:e.rtl?i:a,value:o,previewFilter:P},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",function(){this.find("slider").value(o),L()})}s=q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:z}])).hide().on("show hide",function(e){f.toggleCropRect("show"===e.type)}).on("show",L),l=q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:D},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:D},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(e){!0===e.control.value()&&(A=k/N,M=N/k)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(e){var n=parseInt(i.find("#w").value(),10),r=parseInt(i.find("#h").value(),10);e.preventDefault(),function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments,1);return function(){se.blobToImageResult(t.blob).then(function(t){e.apply(this,[t].concat(o)).then(V).then(H)})}}(ce.resize,n,r)(),W()}).on("show",L),d=q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:G(ce.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:G(ce.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:G(ce.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:G(ce.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",L),p=Y(0,ce.invert),I=Y(0,ce.sharpen),E=Y(0,ce.emboss),g=J(0,ce.brightness,0,-1,1),v=J(0,ce.hue,180,0,360),y=J(0,ce.saturate,0,-1,1),b=J(0,ce.contrast,0,-1,1),w=J(0,ce.grayscale,0,0,1),x=J(0,ce.sepia,0,0,1),T=function(n,r){function o(){var e,n,o;e=i.find("#r")[0].value(),n=i.find("#g")[0].value(),o=i.find("#b")[0].value(),se.blobToImageResult(t.blob).then(function(t){return r(t,e,n,o)}).then(V).then(function(e){var t=Ee(e);U(t),Se(u),u=t})}var a=e.rtl?2:0,c=e.rtl?0:2;return q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:a,value:1,maxValue:c,ondragend:o,previewFilter:P},{type:"slider",label:"G",name:"g",minValue:a,value:1,maxValue:c,ondragend:o,previewFilter:P},{type:"slider",label:"B",name:"b",minValue:a,value:1,maxValue:c,ondragend:o,previewFilter:P},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",function(){i.find("#r,#g,#b").value(1),L()})}(0,ce.colorize),S=J(0,ce.gamma,0,-1,1),C=J(0,ce.exposure,1,0,2),c=q(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:B(v)},{text:"saturate",icon:"saturate",onclick:B(y)},{text:"sepia",icon:"sepia",onclick:B(x)},{text:"emboss",icon:"emboss",onclick:B(E)},{text:"exposure",icon:"exposure",onclick:B(C)},{type:"spacer",flex:1}])).hide(),a=q(O([{tooltip:"Crop",icon:"crop",onclick:B(s)},{tooltip:"Resize",icon:"resize2",onclick:B(l)},{tooltip:"Orientation",icon:"orientation",onclick:B(d)},{tooltip:"Brightness",icon:"sun",onclick:B(g)},{tooltip:"Sharpen",icon:"sharpen",onclick:B(I)},{tooltip:"Contrast",icon:"contrast",onclick:B(b)},{tooltip:"Color levels",icon:"drop",onclick:B(T)},{tooltip:"Gamma",icon:"gamma",onclick:B(S)},{tooltip:"Invert",icon:"invert",onclick:B(p)}])),f=Ie.create({flex:1,imageSrc:t.url}),m=ge.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:function(){U(t=_.undo()),F()}},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:function(){U(t=_.redo()),F()}},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:function(){var e=f.zoom();e<2&&(e+=.1),f.zoom(e)}},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var e=f.zoom();e>.1&&(e-=.1),f.zoom(e)}}]}),h=ge.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:O([m,f])}),R=[a,s,l,d,c,p,g,v,y,b,w,x,T,I,E,S,C],(i=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(pe.DOM.getViewPort().w,800),minHeight:Math.min(pe.DOM.getViewPort().h,650),title:"Edit image",items:R.concat([h]),buttons:O([{text:"Save",name:"save",subtype:"primary",onclick:function(){n(t.blob),i.close()}},{text:"Cancel",onclick:"close"}])})).on("close",function(){o(),Ce(_.data),_=null,u=null}),_.add(t),F(),f.on("load",function(){N=f.imageSize().w,k=f.imageSize().h,A=k/N,M=N/k,i.find("#w").value(N),i.find("#h").value(k)}),f.on("crop",z)}var Ne,ke={edit:function(e,t){return new me(function(n,r){return t.toBlob().then(function(t){Re(e,Ee(t),n,r)})})}},Ae={getImageSize:function(e){var t,n;function r(e){return/^[0-9\.]+px$/.test(e)}return t=e.style.width,n=e.style.height,t||n?r(t)&&r(n)?{w:parseInt(t,10),h:parseInt(n,10)}:null:(t=e.width,n=e.height,t&&n?{w:parseInt(t,10),h:parseInt(n,10)}:null)},setImageSize:function(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))},getNaturalImageSize:function(e){return{w:e.naturalWidth,h:e.naturalHeight}}},Me=(Ne="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===Ne}),_e=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return I.some(o)}return I.none()};Array.prototype.slice;Me(Array.from)&&Array.from;var Oe=function(e){return null!=e},De={traverse:function(e,t){var n;return n=t.reduce(function(e,t){return Oe(e)?e[t]:void 0},e),Oe(n)?n:null},readBlob:function(e){return new me(function(t){var n=R();n.onload=function(e){var n=e.target;t(n.result)},n.readAsText(e)})},requestUrlAsBlob:function(e,t,n){return new me(function(o){var i;(i=new(C.getOrDie("XMLHttpRequest"))).onreadystatechange=function(){4===i.readyState&&o({status:i.status,blob:this.response})},i.open("GET",e,!0),i.withCredentials=n,r.each(t,function(e,t){i.setRequestHeader(t,e)}),i.responseType="blob",i.send()})},parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}},Pe=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],Fe=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],Le=function(e){return"ImageProxy HTTP error: "+_e(Pe,function(t){return e===t.code}).fold(l("Unknown ImageProxy error"),function(e){return e.message})},Ue=function(e){var t=Le(e);return me.reject(t)},Be=function(e){return _e(Fe,function(t){return t.type===e}).fold(l("Unknown service error"),function(e){return e.message})},je=function(e,t){return De.readBlob(t).then(function(e){var t=function(e){var t=De.parseJson(e),n=De.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?Be(n):"Invalid JSON in service error message")}(e);return me.reject(t)})},He={handleServiceErrorResponse:function(e,t){return 400===(n=e)||403===n||500===n?je(0,t):Ue(e);var n},handleHttpError:Ue,getHttpErrorMsg:Le,getServiceErrorMsg:Be},ze=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return De.requestUrlAsBlob(function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)}(e,t),n,!1).then(function(e){return e.status<200||e.status>=300?He.handleServiceErrorResponse(e.status,e.blob):me.resolve(e.blob)})},Ge=function(e,t,n){return t?ze(e,t):function(e,t){return De.requestUrlAsBlob(e,{},t).then(function(e){return e.status<200||e.status>=300?He.handleHttpError(e.status):me.resolve(e.blob)})}(e,n)},We=0,$e=function(e,t){e.notificationManager.open({text:t,type:"error"})},qe=function(e){return e.selection.getNode()},Ve=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new he(n).host===e.documentBaseURI.host},Ye=function(e,t){return-1!==r.inArray(function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")}(e),new he(t.src).host)},Je=function(e,t){var n,o=t.src;return Ye(e,t)?Ge(t.src,null,function(e,t){return-1!==r.inArray(function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")}(e),new he(t.src).host)}(e,t)):Ve(e,t)?F(t):(o=function(e){return e.getParam("imagetools_proxy")}(e),o+=(-1===o.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),n=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")}(e),Ge(o,n,!1))},Xe=function(e){var t;return(t=e.editorUpload.blobCache.getByUri(qe(e).src))?me.resolve(t.blob()):Je(e,qe(e))},Ke=function(e,t){var n=fe.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},function(e){return e.getParam("images_upload_timeout",3e4,"number")}(e));t.set(n)},Ze=function(e){clearTimeout(e.get())},Qe=function(e,t,n,r,o){return t.toBlob().then(function(i){var a,c,u,s,l;return u=e.editorUpload.blobCache,a=(l=qe(e)).src,function(e){return e.getParam("images_reuse_filename",!1,"boolean")}(e)&&((s=u.getByUri(a))?(a=s.uri(),c=s.name()):c=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null}(e,a)),s=u.create({id:"imagetools"+We++,blob:i,base64:t.toBase64(),uri:a,name:c}),u.add(s),e.undoManager.transact(function(){e.$(l).on("load",function t(){e.$(l).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(Ze(r),Ke(e,r))}),o&&e.$(l).attr({width:o.w,height:o.h}),e.$(l).attr({src:s.blobUri()}).removeAttr("data-mce-src")}),s})},et=function(e,t,n,r){return function(){return e._scanForImages().then(d(Xe,e)).then(se.blobToImageResult).then(n).then(function(n){return Qe(e,n,!1,t,r)},function(t){$e(e,t)})}},tt={rotate:function(e,t,n){return function(){var r=Ae.getImageSize(qe(e)),o=r?{w:r.h,h:r.w}:null;return et(e,t,function(e){return ce.rotate(e,n)},o)()}},flip:function(e,t,n){return function(){return et(e,t,function(e){return ce.flip(e,n)})()}},editImageDialog:function(e,t){return function(){var n=qe(e),r=Ae.getNaturalImageSize(n),o=function(e){return new me(function(t){P(e).then(function(o){var i=Ae.getNaturalImageSize(o);r.w===i.w&&r.h===i.h||Ae.getImageSize(n)&&Ae.setImageSize(n,i),de.revokeObjectURL(o.src),t(e)})})};Xe(e).then(se.blobToImageResult).then(d(function(e,n){return ke.edit(e,n).then(o).then(se.blobToImageResult).then(function(n){return Qe(e,n,!0,t)},function(){})},e),function(t){$e(e,t)})}},isEditableImage:function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(Ve(e,t)||Ye(e,t)||e.settings.imagetools_proxy)},cancelTimedUpload:Ze},nt=function(e,t){r.each({mceImageRotateLeft:tt.rotate(e,t,-90),mceImageRotateRight:tt.rotate(e,t,90),mceImageFlipVertical:tt.flip(e,t,"v"),mceImageFlipHorizontal:tt.flip(e,t,"h"),mceEditImage:tt.editImageDialog(e,t)},function(t,n){e.addCommand(n,t)})},rt=function(e,t,n){e.on("NodeChange",function(r){var o=n.get();o&&o.src!==r.element.src&&(tt.cancelTimedUpload(t),e.editorUpload.uploadImagesAuto(),n.set(null)),tt.isEditableImage(e,r.element)&&n.set(r.element)})},ot=function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},it=function(e){e.addContextToolbar(d(tt.isEditableImage,e),function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")}(e))};n.add("imagetools",function(e){var n=t(0),r=t(null);nt(e,n),ot(e),it(e),rt(e,n,r)})}(window)},function(e,t,n){n(68)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){return e.fire("insertCustomChar",{chr:t})},n=function(e,n){var r=t(e,n).chr;e.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.settings.charmap},i=function(e){return e.settings.charmap_append},a=r.isArray,c=function(e){return a(e)?[].concat(function(e){return r.grep(e,function(e){return a(e)&&2===e.length})}(e)):"function"==typeof e?e():[]},u=function(e){return function(e,t){var n=o(e);n&&(t=c(n));var r=i(e);return r?[].concat(t).concat(c(r)):t}(e,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},s=function(e){return{getCharMap:function(){return u(e)},insertChar:function(t){n(e,t)}}},l=function(e){var t,n,r,o=Math.min(e.length,25),i=Math.ceil(e.length/o);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<i;r++){for(t+="<tr>",n=0;n<o;n++){var a=r*o+n;if(a<e.length){var c=e[a],u=parseInt(c[0],10),s=c?String.fromCharCode(u):"&nbsp;";t+='<td title="'+c[1]+'"><div tabindex="-1" title="'+c[1]+'" role="button" data-chr="'+u+'">'+s+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+="</tbody></table>"},d=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},f=function(e){var t,r={type:"container",html:l(u(e)),onclick:function(r){var o=r.target;if(/^(TD|DIV)$/.test(o.nodeName)){var i=d(o).firstChild;if(i&&i.hasAttribute("data-chr")){var a=i.getAttribute("data-chr"),c=parseInt(a,10);isNaN(c)||n(e,String.fromCharCode(c)),r.ctrlKey||t.close()}}},onmouseover:function(e){var n=d(e.target);n&&n.firstChild?(t.find("#preview").text(n.firstChild.firstChild.data),t.find("#previewTitle").text(n.title)):(t.find("#preview").text(" "),t.find("#previewTitle").text(" "))}};t=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){t.close()}}]})},m=function(e){e.addCommand("mceShowCharmap",function(){f(e)})},h=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};e.add("charmap",function(e){return m(e),h(e),s(e)})}()},function(e,t,n){n(70)},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},n=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};e.add("hr",function(e){t(e),n(e)})}()},function(e,t){!function(e){e.remove(),e=null;var t={path_absolute:"/",menubar:!1,selector:"textarea.richTextBox",min_height:300,skin_url:$('meta[name="assets-path"]').attr("content")+"?path=js/skins/voyager",plugins:"insertdatetime, advlist, wordcount, imagetools, searchreplace, autolink, hr, charmap, preview, link, image, code, table, textcolor, lists, media",toolbar:"preview searchreplace | styleselect bold italic underline charmap hr | forecolor backcolor | alignleft aligncenter alignright | bullist numlist outdent indent | link image media table | insertdatetime code",relative_urls:!1,file_browser_callback:function(e,n,r,o){var i=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,c=t.path_absolute+"admin/filemanager?field_name="+e;c+="image"==r?"&type=Images":"&type=Files",tinyMCE.activeEditor.windowManager.open({file:c,title:"Filemanager",width:.8*i,height:.8*a,resizable:"yes",close_previous:"no"})},convert_urls:!1,image_caption:!0,image_title:!0};tinymce.init(t)}(tinymce)},function(e,t){$(document).ready(function(){$("#bulk_active_btn").click(function(){var e=$("#dataTable input[type=checkbox]:checked").not(".select_all"),t=$(this).data("name"),n=$(this).data("model-statut"),r=$(this).data("model-name"),o=$(this).data("translation-name"),i=$(this).data("translation-name-success"),a=e.length,c=[];a?($.each(e,function(){var e=$(this).val();c.push(e)}),$.post({url:"/admin/voyagerbaseextend/ajax/statut",data:{bulk_ids:c,bulk_active_model_statut:n,bulk_active_name:t,bulk_active_model_name:r,count:a},success:function(e){window.location.href=e,toastr.success(i)},error:function(e){console.log("error "+e)}})):toastr.warning(o)}),$("#bulk_disable_btn").click(function(){var e=$("#dataTable input[type=checkbox]:checked").not(".select_all"),t=$(this).data("name"),n=$(this).data("model-statut"),r=$(this).data("model-name"),o=$(this).data("translation-name"),i=$(this).data("translation-name-success"),a=e.length,c=[];a?($.each(e,function(){var e=$(this).val();c.push(e)}),$.post({url:"/admin/voyagerbaseextend/ajax/statut",data:{bulk_ids:c,bulk_active_model_statut:n,bulk_active_name:t,bulk_active_model_name:r,count:a},success:function(e){window.location.href=e,toastr.success(i)},error:function(e){console.log("error "+e)}})):toastr.warning(o)})})}]));