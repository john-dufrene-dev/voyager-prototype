!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=48)}({101:function(e,t,n){"use strict";n.r(t);n(49),n(51),n(53),n(55),n(57),n(59),n(61),n(63),n(65),n(67),n(69),n(70),n(71)},48:function(e,t,n){e.exports=n(101)},49:function(e,t,n){n(50)},50:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},r=function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},o=function(e){return e.getParam("content_style","")},i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){var t="",n=e.dom.encode,r=o(e);t+='<base href="'+n(e.documentBaseURI.getURI())+'">',r&&(t+='<style type="text/css">'+r+"</style>"),i.each(e.contentCSS,function(r){t+='<link type="text/css" rel="stylesheet" href="'+n(e.documentBaseURI.toAbsolute(r))+'">'});var a=e.settings.body_id||"tinymce";-1!==a.indexOf("=")&&(a=(a=e.getParam("body_id","","hash"))[e.id]||a);var c=e.settings.body_class||"";-1!==c.indexOf("=")&&(c=(c=e.getParam("body_class","","hash"))[e.id]||"");var u=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+t+'</head><body id="'+n(a)+'" class="mce-content-body '+n(c)+'"'+n(u)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'},c=function(e,t,n){var r=a(e);if(n)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(r);else{var o=t.contentWindow.document;o.open(),o.write(r),o.close()}},u=function(e){var o=!t.ie,i='<iframe src="" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",a=n(e),u=r(e);e.windowManager.open({title:"Preview",width:a,height:u,html:i,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(t){var n=t.control.getEl("body").firstChild;c(e,n,o)}})},l=function(e){e.addCommand("mcePreview",function(){u(e)})},s=function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};e.add("preview",function(e){l(e),s(e)})}()},51:function(e,t,n){n(52)},52:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("media_scripts")},o=function(e){return e.getParam("audio_template_callback")},i=function(e){return e.getParam("video_template_callback")},a=function(e){return e.getParam("media_live_embeds",!0)},c=function(e){return e.getParam("media_filter_html",!0)},u=function(e){return e.getParam("media_url_resolver")},l=function(e){return e.getParam("media_alt_source",!0)},s=function(e){return e.getParam("media_poster",!0)},d=function(e){return e.getParam("media_dimensions",!0)},f=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},p=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},g=function(e){return function(t,n){t&&(t.style[e]=function(e){return/^[0-9.]+$/.test(e)?e+"px":e}(n))}},v={getMaxWidth:p("maxWidth"),getMaxHeight:p("maxHeight"),setMaxWidth:g("maxWidth"),setMaxHeight:g("maxHeight")},y=m.DOM,b=function(e){return y.getAttrib(e,"data-ephox-embed-iri")},w=function(e,t){return function(e){var t=y.createFragment(e);return""!==b(t.firstChild)}(t)?function(e){var t=y.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:b(t),source2:"",poster:"",width:v.getMaxWidth(t),height:v.getMaxHeight(t)}}(t):function(e,t){var r={};return f({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,o){if(r.source1||"param"!==t||(r.source1=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=n.extend(o.map,r)),"script"===t){var i=h(e,o.map.src);if(!i)return;r={type:"script",source1:o.map.src,width:i.width,height:i.height}}"source"===t&&(r.source1?r.source2||(r.source2=o.map.src):r.source1=o.map.src),"img"!==t||r.poster||(r.poster=o.map.src)}}).parse(t),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r}(e,t)},x=tinymce.util.Tools.resolve("tinymce.util.Promise"),T=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t||""},k=tinymce.util.Tools.resolve("tinymce.html.Writer"),E=tinymce.util.Tools.resolve("tinymce.html.Schema"),M=m.DOM,C=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)(i=e[r]).name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},I=function(e,t){var n=M.createFragment(e).firstChild;return v.setMaxWidth(n,t.width),v.setMaxHeight(n,t.height),function(e){var t=k();return f(t).parse(e),t.getContent()}(n.outerHTML)},R=function(e,t,n){return function(e){var t=M.createFragment(e);return""!==M.getAttrib(t.firstChild,"data-ephox-embed-iri")}(e)?I(e,t):function(e,t,n){var r,o=k(),i=0;return f({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,a,c){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&C(a,{width:t.width,height:t.height})}if(n)switch(e){case"video":C(a,{poster:t.poster,src:""}),t.source2&&C(a,{src:""});break;case"iframe":C(a,{src:t.source1});break;case"source":if(++i<=2&&(C(a,{src:t["source"+i],type:t["source"+i+"mime"]}),!t["source"+i]))return;break;case"img":if(!t.poster)return;r=!0}o.start(e,a,c)},end:function(e){if("video"===e&&n)for(var a=1;a<=2;a++)if(t["source"+a]){var c=[];c.map={},i<a&&(C(c,{src:t["source"+a],type:t["source"+a+"mime"]}),o.start("source",c,!0))}if(t.poster&&"object"===e&&n&&!r){var u=[];u.map={},C(u,{src:t.poster,width:t.width,height:t.height}),o.start("img",u,!0)}o.end(e)}},E({})).parse(e),o.getContent()}(e,t,n)},N=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],A=function(e,t){for(var n=e.regex.exec(t),r=e.url,o=function(e){r=r.replace("$"+e,function(){return n[e]?n[e]:""})},i=0;i<n.length;i++)o(i);return r.replace(/\?$/,"")},_=function(e,t){var a=n.extend({},t);if(!a.source1&&(n.extend(a,w(r(e),a.embed)),!a.source1))return"";a.source2||(a.source2=""),a.poster||(a.poster=""),a.source1=e.convertURL(a.source1,"source"),a.source2=e.convertURL(a.source2,"source"),a.source1mime=T(a.source1),a.source2mime=T(a.source2),a.poster=e.convertURL(a.poster,"poster");var c=function(e){var t=N.filter(function(t){return t.regex.test(e)});return t.length>0?n.extend({},t[0],{url:A(t[0],e)}):null}(a.source1);if(c&&(a.source1=c.url,a.type=c.type,a.allowFullscreen=c.allowFullscreen,a.width=a.width||c.w,a.height=a.height||c.h),a.embed)return R(a.embed,a,!0);var u=h(r(e),a.source1);u&&(a.type="script",a.width=u.width,a.height=u.height);var l=o(e),s=i(e);return a.width=a.width||300,a.height=a.height||150,n.each(a,function(t,n){a[n]=e.dom.encode(t)}),"iframe"===a.type?function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"}(a):"application/x-shockwave-flash"===a.source1mime?function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"}(a):-1!==a.source1mime.indexOf("audio")?function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"}(a,l):"script"===a.type?function(e){return'<script src="'+e.source1+'"><\/script>'}(a):function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"}(a,s)},S={},O=function(e){return function(t){return _(e,t)}},P=function(e,t){var n=u(e);return n?function(e,t,n){return new x(function(r,o){var i=function(n){return n.html&&(S[e.source1]=n),r({url:e.source1,html:n.html?n.html:t(e)})};S[e.source1]?i(S[e.source1]):n({url:e.source1},i,o)})}(t,O(e),n):function(e,t){return new x(function(n){n({html:t(e),url:e.source1})})}(t,O(e))},U=function(e){return S.hasOwnProperty(e)},D=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},L=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},j=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),D(e,t)},B=function(e){L(e,j)},z=function(e){var t=function(){e(function(e){B(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},F=function(e){L(e,D)},H=B,$=t.ie&&t.ie<=8?"onChange":"onInput",W=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},q=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},V=function(e,t){return function(o){var i=o.html,a=e.find("#embed")[0],c=n.extend(w(r(t),i),{source1:o.url});e.fromJSON(c),a&&(a.value(i),H(e))}},Y=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;r>=0;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])}(e,n),e.nodeChanged()},X=function(e){var t,o,i=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){P(e,t.toJSON()).then(V(t,e)).catch(W(e))},1)},onchange:function(r){P(e,t.toJSON()).then(V(t,e)).catch(W(e)),function(e,t){n.each(t,function(t,n){e.find("#"+n).value(t)})}(t,r.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],a=[];if(l(e)&&a.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),s(e)&&a.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),d(e)){var c=z(function(e){e(t),o=t.toJSON(),t.find("#embed").value(R(o.embed,o))});i.push(c)}o=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:v.getMaxWidth(t),height:v.getMaxHeight(t)}:t.getAttribute("data-mce-object")?w(r(e),e.serializer.serialize(t,{selection:!0})):{}}(e);var u={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:q(e),multiline:!0,rows:5,label:"Source"};u[$]=function(){o=n.extend({},w(r(e),this.value())),this.parent().parent().fromJSON(o)};var f=[{title:"General",type:"form",items:i},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},u]}];a.length>0&&f.push({title:"Advanced",type:"form",items:a}),t=e.windowManager.open({title:"Insert/edit media",data:o,bodyType:"tabpanel",body:f,onSubmit:function(){H(t),function(e,t){var n=e.toJSON();n.embed=R(n.embed,n),n.embed&&U(n.source1)?Y(t,n.embed):P(t,n).then(function(e){Y(t,e.html)}).catch(W(t))}(t,e)}}),F(t)},J=function(e){return{showDialog:function(){X(e)}}},K=function(e){e.addCommand("mceMedia",function(){X(e)})},G=tinymce.util.Tools.resolve("tinymce.html.Node"),Z=function(e,t){if(!1===c(e))return t;var n,r=k();return f({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,o,i){if(n=!0,"script"!==t&&"noscript"!==t){for(var a=0;a<o.length;a++){if(0===o[a].name.indexOf("on"))return;"style"===o[a].name&&(o[a].value=e.dom.serializeStyle(e.dom.parseStyle(o[a].value),t))}r.start(t,o,i),n=!1}},end:function(e){n||r.end(e)}},E({})).parse(t),r.getContent()},Q=function(e,n){var r,o=n.name;return(r=new G("img",1)).shortEnded=!0,te(e,n,r),r.attr({width:n.attr("width")||"300",height:n.attr("height")||("audio"===o?"30":"150"),style:n.attr("style"),src:t.transparentSrc,"data-mce-object":o,class:"mce-object mce-object-"+o}),r},ee=function(e,t){var n,r,o,i=t.name;return(n=new G("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":i,class:"mce-preview-object mce-object-"+i}),te(e,t,n),(r=new G(i,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(o=new G("span",1)).attr("class","mce-shim"),n.append(r),n.append(o),n},te=function(e,t,n){var r,o,i,a,c;for(a=(i=t.attributes).length;a--;)r=i[a].name,o=i[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(c=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(Z(e,c))),n.firstChild=null)},ne=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},re=function(e){return function(n){for(var o,i,c=n.length;c--;)(o=n[c]).parent&&(o.parent.attr("data-mce-object")||("script"!==o.name||(i=h(r(e),o.attr("src"))))&&(i&&(i.width&&o.attr("width",i.width.toString()),i.height&&o.attr("height",i.height.toString())),"iframe"===o.name&&a(e)&&t.ceFalse?ne(o)||o.replace(ee(e,o)):ne(o)||o.replace(Q(e,o))))}},oe=function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();n.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var r=e.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){r[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",re(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,o,i,a,c,u,l,s,d=t.length;d--;)if((r=t[d]).parent){for(l=r.attr(n),o=new G(l,1),"audio"!==l&&"script"!==l&&((s=r.attr("class"))&&-1!==s.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),i=(a=r.attributes).length;i--;){var f=a[i].name;0===f.indexOf("data-mce-p-")&&o.attr(f.substr(11),a[i].value)}"script"===l&&o.attr("type","text/javascript"),(c=r.attr("data-mce-html"))&&((u=new G("#text",3)).raw=!0,u.value=Z(e,unescape(c)),o.append(u)),r.replace(o)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})},ie=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},ae=function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(R(t,{width:e.width,height:e.height}))))})},ce=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})};e.add("media",function(e){return K(e),ce(e),ie(e),oe(e),ae(e),J(e)})}()},53:function(e,t,n){n(54)},54:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},r=function(e){return e.getParam("default_link_target","")},o=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},i=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,o(t,n)):e.setStartBefore(t)},a=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,o(t,n)):e.setEndAfter(t)},c=function(e,t,o){var c,u,l,s,d,f,m,h,p,g,v=n(e),y=r(e);if("A"!==e.selection.getNode().tagName){if((c=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(h=c.endContainer.previousSibling)){if(!c.endContainer.firstChild||!c.endContainer.firstChild.nextSibling)return;h=c.endContainer.firstChild.nextSibling}if(p=h.length,i(c,h,p),a(c,h,p),c.endOffset<5)return;u=c.endOffset,s=h}else{if(3!==(s=c.endContainer).nodeType&&s.firstChild){for(;3!==s.nodeType&&s.firstChild;)s=s.firstChild;3===s.nodeType&&(i(c,s,0),a(c,s,s.nodeValue.length))}u=1===c.endOffset?2:c.endOffset-1-t}l=u;do{i(c,s,u>=2?u-2:0),a(c,s,u>=1?u-1:0),u-=1,g=c.toString()}while(" "!==g&&""!==g&&160!==g.charCodeAt(0)&&u-2>=0&&g!==o);!function(e,t){return e===t||" "===e||160===e.charCodeAt(0)}(c.toString(),o)?0===c.startOffset?(i(c,s,0),a(c,s,l)):(i(c,s,u),a(c,s,l)):(i(c,s,u),a(c,s,l),u+=1),"."===(f=c.toString()).charAt(f.length-1)&&a(c,s,l-1),(m=(f=c.toString().trim()).match(v))&&("www."===m[1]?m[1]="http://www.":/@$/.test(m[1])&&!/^mailto:/.test(m[1])&&(m[1]="mailto:"+m[1]),d=e.selection.getBookmark(),e.selection.setRng(c),e.execCommand("createlink",!1,m[1]+m[2]),y&&e.dom.setAttrib(e.selection.getNode(),"target",y),e.selection.moveToBookmark(d),e.nodeChanged())}},u=function(e){var n;e.on("keydown",function(t){if(13===t.keyCode)return function(e){c(e,-1,"")}(e)}),t.ie?e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){if(41===t.keyCode)return function(e){c(e,-1,"(")}(e)}),e.on("keyup",function(t){if(32===t.keyCode)return function(e){c(e,0,"")}(e)}))};e.add("autolink",function(e){u(e)})}()},55:function(e,t,n){n(56)},56:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var o={findAndReplaceDOMText:function(e,t,n,o,i){var a,c,u,l,s,d,f=[],m=0;function h(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(u=t.ownerDocument,l=i.getBlockElements(),s=i.getWhiteSpaceElements(),d=i.getShortEndedElements(),c=function e(t){var n;if(3===t.nodeType)return t.data;if(s[t.nodeName]&&!l[t.nodeName])return"";if(n="",r(t))return"\n";if((l[t.nodeName]||d[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(t)){if(e.global)for(;a=e.exec(c);)f.push(h(a,o));else a=c.match(e),f.push(h(a,o));return f.length&&(m=f.length,function(e,t,n){var o,i,a,c,u=[],f=0,m=e,h=t.shift(),p=0;e:for(;;){if((l[m.nodeName]||d[m.nodeName]||r(m))&&f++,3===m.nodeType&&(!i&&m.length+f>=h[1]?(i=m,c=h[1]-f):o&&u.push(m),!o&&m.length+f>h[0]&&(o=m,a=h[0]-f),f+=m.length),o&&i){if(m=n({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:c,innerNodes:u,match:h[2],matchIndex:p}),f-=i.length-c,o=null,i=null,u=[],p++,!(h=t.shift()))break}else if(s[m.nodeName]&&!l[m.nodeName]||!m.firstChild){if(m.nextSibling){m=m.nextSibling;continue}}else if(!r(m)){m=m.firstChild;continue}for(;;){if(m.nextSibling){m=m.nextSibling;break}if(m.parentNode===e)break e;m=m.parentNode}}}(t,f,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:u.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(u.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,i=e.startNode,a=e.endNode,c=e.matchIndex;if(i===a){var l=i;o=l.parentNode,e.startNodeIndex>0&&(n=u.createTextNode(l.data.substring(0,e.startNodeIndex)),o.insertBefore(n,l));var s=t(e.match[0],c);return o.insertBefore(s,l),e.endNodeIndex<l.length&&(r=u.createTextNode(l.data.substring(e.endNodeIndex)),o.insertBefore(r,l)),l.parentNode.removeChild(l),s}n=u.createTextNode(i.data.substring(0,e.startNodeIndex)),r=u.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(i.data.substring(e.startNodeIndex),c),f=0,m=e.innerNodes.length;f<m;++f){var h=e.innerNodes[f],p=t(h.data,c);h.parentNode.replaceChild(p,h)}var g=t(a.data.substring(0,e.endNodeIndex),c);return(o=i.parentNode).insertBefore(n,i),o.insertBefore(d,i),o.removeChild(i),(o=a.parentNode).insertBefore(g,a),o.insertBefore(r,a),o.removeChild(a),g}}(n))),m}}},i=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},a=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},c=function(e,t){var r,o=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var a=0;a<r.length;a++){var c=i(r[a]);null!==c&&c.length&&c===t.toString()&&o.push(r[a])}return o},u=function(e,t,n){var r=t.get(),o=e.dom;(n=!1!==n)?r++:r--,o.removeClass(c(e,t.get()),"mce-match-marker-selected");var i=c(e,r);return i.length?(o.addClass(c(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(i[0]),r):-1},l=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},s=function(e,t){var n=u(e,t,!0);-1!==n&&t.set(n)},d=function(e,t){var n=u(e,t,!1);-1!==n&&t.set(n)},f=function(e){var t=i(e);return null!==t&&t.length>0},m=function(e,t,r){var o,c,u,l;for(c=n.toArray(e.getBody().getElementsByTagName("span")),o=0;o<c.length;o++){var s=i(c[o]);null!==s&&s.length&&(s===t.get().toString()&&(u||(u=c[o].firstChild),l=c[o].firstChild),a(c[o]))}if(u&&l){var d=e.dom.createRng();return d.setStart(u,0),d.setEnd(l,l.data.length),!1!==r&&e.selection.setRng(d),d}},h=function(e,t){return c(e,t.get()+1).length>0},p=function(e,t){return c(e,t.get()-1).length>0},g={done:m,find:function(e,t,n,r,i){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=i?"\\b"+n+"\\b":n;var a=function(e,t,n){var r,i;return(i=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),m(e,t,!1),o.findAndReplaceDOMText(n,r,i,!1,e.schema)}(e,t,new RegExp(n,r?"g":"gi"));return a&&(t.set(-1),t.set(u(e,t,!0))),a},next:s,prev:d,replace:function(e,t,r,o,c){var u,m,g,v,y,b,w=t.get();for(o=!1!==o,g=e.getBody(),m=n.grep(n.toArray(g.getElementsByTagName("span")),f),u=0;u<m.length;u++){var x=i(m[u]);if(v=y=parseInt(x,10),c||v===t.get()){for(r.length?(m[u].firstChild.nodeValue=r,a(m[u])):l(e.dom,m[u]);m[++u];){if((v=parseInt(i(m[u]),10))!==y){u--;break}l(e.dom,m[u])}o&&w--}else y>t.get()&&m[u].setAttribute("data-mce-index",y-1)}return t.set(w),o?(b=h(e,t),s(e,t)):(b=p(e,t),d(e,t)),!c&&b},hasNext:h,hasPrev:p},v=function(e,t){return{done:function(n){return g.done(e,t,n)},find:function(n,r,o){return g.find(e,t,n,r,o)},next:function(){return g.next(e,t)},prev:function(){return g.prev(e,t)},replace:function(n,r,o){return g.replace(e,t,n,r,o)}}},y=function(e,t){var r,o={};function i(){c.statusbar.find("#next").disabled(!1===g.hasNext(e,t)),c.statusbar.find("#prev").disabled(!1===g.hasPrev(e,t))}function a(){e.windowManager.alert("Could not find the specified string.",function(){c.find("#find")[0].focus()})}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var c=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),g.done(e,t),e.undoManager.add()},onSubmit:function(n){var r,u,l,s;return n.preventDefault(),u=c.find("#case").checked(),s=c.find("#words").checked(),(l=c.find("#find").value()).length?o.text===l&&o.caseState===u&&o.wholeWord===s?g.hasNext(e,t)?(g.next(e,t),void i()):void a():((r=g.find(e,t,l,u,s))||a(),c.statusbar.items().slice(1).disabled(0===r),i(),void(o={text:l,caseState:u,wholeWord:s})):(g.done(e,t,!1),void c.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){c.submit()}},{text:"Replace",disabled:!0,onclick:function(){g.replace(e,t,c.find("#replace").value())||(c.statusbar.items().slice(1).disabled(!0),t.set(-1),o={})}},{text:"Replace all",disabled:!0,onclick:function(){g.replace(e,t,c.find("#replace").value(),!0,!0),c.statusbar.items().slice(1).disabled(!0),o={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){g.prev(e,t),i()}},{text:"Next",name:"next",disabled:!0,onclick:function(){g.next(e,t),i()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},b=function(e,t){e.addCommand("SearchReplace",function(){y(e,t)})},w=function(e,t){return function(){y(e,t)}},x=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:w(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:w(e,t)}),e.shortcuts.add("Meta+F","",w(e,t))};t.add("searchreplace",function(t){var n=e(-1);return b(t,n),x(t,n),v(t,n)})}()},57:function(e,t,n){n(58)},58:function(e,t){!function(){"use strict";var e,t,n,r,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),c=tinymce.util.Tools.resolve("tinymce.Env"),u="[-'\\.‘’․﹒＇．]",l="[:··״‧︓﹕：]",s="[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",d="[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",f="\\r",m="\\n",h="[\v\f\u2028\u2029]",p="[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",g="[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",v="[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",y="[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",b="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",w={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp(u),new RegExp(l),new RegExp(s),new RegExp(d),new RegExp(f),new RegExp(m),new RegExp(h),new RegExp(p),new RegExp(g),new RegExp(v),new RegExp(y),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+b+"$"),WHITESPACE:/^\s+$/},x=function(e){return function(){return e}},T=x(!1),k=x(!0),E=function(){return M},M=(r={fold:function(e,t){return e()},is:T,isSome:T,isNone:k,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:E,ap:E,each:function(){},bind:E,flatten:E,exists:T,forall:k,filter:E,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:x("none()")},Object.freeze&&Object.freeze(r),r),C=(o="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===o}),I=(Array.prototype.slice,C(Array.from)&&Array.from,w.SETS),R=w.characterIndices.OTHER,N=function(e){var t,n,r=R,o=I.length;for(t=0;t<o;++t)if((n=I[t])&&n.test(e)){r=t;break}return r},A=function(e){var t,n,r=(t=N,n={},function(e){if(n[e])return n[e];var r=t(e);return n[e]=r,r});return function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r}(e.split(""),r)},_=w.characterIndices,S=function(e,t){var n,r,o=e[t],i=e[t+1];return!(t<0||t>e.length-1&&0!==t||o===_.ALETTER&&i===_.ALETTER||(r=e[t+2],o===_.ALETTER&&(i===_.MIDLETTER||i===_.MIDNUMLET||i===_.AT)&&r===_.ALETTER||(n=e[t-1],(o===_.MIDLETTER||o===_.MIDNUMLET||i===_.AT)&&i===_.ALETTER&&n===_.ALETTER||!(o!==_.NUMERIC&&o!==_.ALETTER||i!==_.NUMERIC&&i!==_.ALETTER)||(o===_.MIDNUM||o===_.MIDNUMLET)&&i===_.NUMERIC&&n===_.NUMERIC||o===_.NUMERIC&&(i===_.MIDNUM||i===_.MIDNUMLET)&&r===_.NUMERIC||o===_.EXTEND||o===_.FORMAT||n===_.EXTEND||n===_.FORMAT||i===_.EXTEND||i===_.FORMAT||o===_.CR&&i===_.LF||o!==_.NEWLINE&&o!==_.CR&&o!==_.LF&&i!==_.NEWLINE&&i!==_.CR&&i!==_.LF&&(o===_.KATAKANA&&i===_.KATAKANA||i===_.EXTENDNUMLET&&(o===_.ALETTER||o===_.NUMERIC||o===_.KATAKANA||o===_.EXTENDNUMLET)||o===_.EXTENDNUMLET&&(i===_.ALETTER||i===_.NUMERIC||i===_.KATAKANA)||o===_.AT))))},O=w.EMPTY_STRING,P=w.WHITESPACE,U=w.PUNCTUATION,D=function(e){return"http"===e||"https"===e},L=function(e,t,n){var r=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(P.test(r))break}return n}(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},j=function(e,t){return function(e,t){var n,r,o,i=0,a=A(e),c=a.length,u=[],l=[];for(t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),r=t.includePunctuation,o=t.includeWhitespace;i<c;++i)if(n=e.charAt(i),u.push(n),S(a,i)){if((u=u.join(O))&&(o||!P.test(u))&&(r||!U.test(u)))if(D(u)){var s=L(u,e,i);l.push(s.word),i=s.index}else l.push(u);u=[]}return l}(e.replace(/\ufeff/g,""),t)},B=function(e,t){return c.ie?function(e,t){for(var n=t.getBlockElements(),r=t.getShortEndedElements(),o=t.getWhiteSpaceElements(),i=function(e){return n[e.nodeName]||r[e.nodeName]||o[e.nodeName]},c="",u=new a(e,e);e=u.next();)3===e.nodeType?c+=e.data:i(e)&&(c+=" ");return c}(e,t):e.innerText},z=function(e){return j(function(e){return e.removed?"":B(e.getBody(),e.schema)}(e)).length},F=function(e){return{getCount:function(){return z(e)}}},H=tinymce.util.Tools.resolve("tinymce.util.Delay"),$=tinymce.util.Tools.resolve("tinymce.util.I18n"),W=function(e){var t=function(e){return $.translate(["{0} words",z(e)])},n=function(){e.theme.panel.find("#wordcount").text(t(e))};e.on("init",function(){var r=e.theme.panel&&e.theme.panel.find("#statusbar")[0],o=H.debounce(n,300);r&&H.setEditorTimeout(e,function(){r.insert({type:"label",name:"wordcount",text:t(e),classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",o)},0)})};i.add("wordcount",function(e){return W(e),F(e)})}()},59:function(e,t,n){n(60)},60:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},r=function(e){e.addCommand("ApplyUnorderedListStyle",function(t,r){n(e,"UL",r["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,r){n(e,"OL",r["list-style-type"])})},o=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},i=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},a=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},c=function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}},u=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},l=function(e){return t.map(e,function(e){return{text:function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}(e),data:"default"===e?"":e}})},s=function(e,n){return function(r){var o=r.control;e.on("NodeChange",function(r){var i=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(r.parents,a),u=-1!==i?r.parents.slice(0,i):r.parents,l=t.grep(u,c(e));o.active(l.length>0&&l[0].nodeName===n)})}},d=function(e){return function(t){var n=u(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}},f=function(e,t,r,o,i,a){a.length>0?function(e,t,r,o,i,a){e.addButton(t,{active:!1,type:"splitbutton",tooltip:r,menu:l(a),onPostRender:s(e,i),onshow:d(e),onselect:function(t){n(e,i,t.control.settings.data)},onclick:function(){e.execCommand(o)}})}(e,t,r,o,i,a):function(e,t,n,r,o,i){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:s(e,o),onclick:function(){e.execCommand(r)}})}(e,t,r,o,i)},m=function(e){f(e,"numlist","Numbered list","InsertOrderedList","OL",o(e)),f(e,"bullist","Bullet list","InsertUnorderedList","UL",i(e))};e.add("advlist",function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"lists")&&(m(e),r(e))})}()},61:function(e,t,n){n(62)},62:function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},r=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},o=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},i=n,a=r,c=function(e){var t=r(e);return t.length>0?t[0]:n(e)},u=function(e){return e.getParam("insertdatetime_element",!1)},l="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f="January February March April May June July August September October November December".split(" "),m=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},h=function(e,t,n){return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",m(n.getMonth()+1,2))).replace("%d",m(n.getDate(),2))).replace("%H",""+m(n.getHours(),2))).replace("%M",""+m(n.getMinutes(),2))).replace("%S",""+m(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(f[n.getMonth()]))).replace("%b",""+e.translate(d[n.getMonth()]))).replace("%A",""+e.translate(s[n.getDay()]))).replace("%a",""+e.translate(l[n.getDay()]))).replace("%%","%")},p=function(e,t){if(u(e)){var n=h(e,t),r=void 0;r=/%[HMSIp]/.test(t)?h(e,"%Y-%m-%dT%H:%M"):h(e,"%Y-%m-%d");var o=e.dom.getParent(e.selection.getStart(),"time");o?function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)}(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(h(e,t))},g=h,v=function(e){e.addCommand("mceInsertDate",function(){p(e,o(e))}),e.addCommand("mceInsertTime",function(){p(e,i(e))})},y=tinymce.util.Tools.resolve("tinymce.util.Tools"),b=function(e,t){var n=function(e,t){var n=a(e);return y.map(n,function(n){return{text:g(e,n),onclick:function(){t.set(n),p(e,n)}}})}(e,t);e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:n,onclick:function(){var n=t.get();p(e,n||c(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:n,context:"insert"})};t.add("insertdatetime",function(t){var n=e(null);v(t),b(t,n)})}()},63:function(e,t,n){n(64)},64:function(e,t){!function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return function(){return e}};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var a,c,u,l,s=o(!1),d=o(!0),f=s,m=d,h=function(){return p},p=(l={fold:function(e,t){return e()},is:f,isSome:f,isNone:m,getOr:u=function(e){return e},getOrThunk:c=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:u,orThunk:c,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:f,forall:m,filter:h,equals:a=function(e){return e.isNone()},equals_:a,toArray:function(){return[]},toString:o("none()")},Object.freeze&&Object.freeze(l),l),g=function(e){var t=function(){return e},n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:m,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return g(t(e))},ap:function(t){return t.fold(h,function(t){return g(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?o:p},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},v={some:g,none:h,from:function(e){return null==e?p:g(e)}},y=void 0!==e.window?e.window:Function("return this;")(),b=function(e,t){return function(e,t){for(var n=null!=t?t:y,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)},w={getOrDie:function(e,t){var n=function(e,t){return b(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}};function x(){return new(w.getOrDie("FileReader"))}var T={atob:function(e){return w.getOrDie("atob")(e)},requestAnimationFrame:function(e){w.getOrDie("requestAnimationFrame")(e)}};function k(t,n){return C(e.document.createElement("canvas"),t,n)}function E(e){var t=k(e.width,e.height);return M(t).drawImage(e,0,0),t}function M(e){return e.getContext("2d")}function C(e,t,n){return e.width=t,e.height=n,e}function I(e){return e.naturalWidth||e.width}function R(e){return e.naturalHeight||e.height}var N=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,r(a,this),r(c,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){return e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){var t=this;null!==this._state?n(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void s(r(t,e),r(a,this),r(c,this))}this._state=!0,this._value=e,u.call(this)}catch(e){c.call(this,e)}}function c(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];i.call(this,n)}this._deferreds=[]}function l(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t(function(t,o){i.call(r,new l(e,n,t,o))})},t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Array.prototype.slice.call(1===e.length&&o(e[0])?e[0]:e);return new t(function(e,t){if(0===r.length)return e([]);var n=r.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(e){o(i,e)},t)}r[i]=a,0==--n&&e(r)}catch(e){t(e)}}for(var i=0;i<r.length;i++)o(i,r[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,o=e;r<o.length;r++)o[r].then(t,n)})},t}();function A(t){var n=t.src;return 0===n.indexOf("data:")?O(n):function(t){return new N(function(n,r){var o=new e.XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200===this.status&&n(this.response)},o.onerror=function(){var e,t=this;r(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},o.send()})}(n)}function _(t){return new N(function(n,r){var o=e.URL.createObjectURL(t),i=new e.Image,a=function(){i.removeEventListener("load",c),i.removeEventListener("error",u)};function c(){a(),n(i)}function u(){a(),r("Unable to load data of type "+t.type+": "+o)}i.addEventListener("load",c),i.addEventListener("error",u),i.src=o,i.complete&&c()})}function S(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return v.none();for(var r,o,i,a=n[1],c=t[1],u=T.atob(c),l=u.length,s=Math.ceil(l/1024),d=new Array(s),f=0;f<s;++f){for(var m=1024*f,h=Math.min(m+1024,l),p=new Array(h-m),g=m,y=0;g<h;++y,++g)p[y]=u[g].charCodeAt(0);d[f]=(r=p,new(w.getOrDie("Uint8Array"))(r))}return v.some((o=d,i={type:a},new(w.getOrDie("Blob"))(o,i)))}function O(e){return new N(function(t,n){S(e).fold(function(){n("uri is not base64: "+e)},t)})}function P(t,n,r){return n=n||"image/png",e.HTMLCanvasElement.prototype.toBlob?new N(function(e,o){t.toBlob(function(t){t?e(t):o()},n,r)}):O(t.toDataURL(n,r))}function U(t){return _(t).then(function(t){!function(t){e.URL.revokeObjectURL(t.src)}(t);var n=k(I(t),R(t));return M(n).drawImage(t,0,0),n})}function D(e,t,n){var r=t.type;function i(t,n){return e.then(function(e){return function(e,t,n){return t=t||"image/png",e.toDataURL(t,n)}(e,t,n)})}return{getType:o(r),toBlob:function(){return N.resolve(t)},toDataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(e){return P(e,t,n)})},toAdjustedDataURL:i,toAdjustedBase64:function(e,t){return i(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(E)}}}function L(e){return function(e){return new N(function(t){var n=x();n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}(e).then(function(t){return D(U(e),e,t)})}function j(e,t){return P(e,t).then(function(t){return D(N.resolve(e),t,e.toDataURL())})}function B(e,t,n){var r="string"==typeof e?parseFloat(e):e;return r>n?r=n:r<t&&(r=t),r}var z=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function F(e,t){for(var n,r=[],o=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)r[a]=t[a+5*i];for(a=0;a<5;a++){n=0;for(var c=0;c<5;c++)n+=e[a+5*c]*r[c];o[a+5*i]=n}}return o}function H(e,t){return t=B(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,B(e,0,1)})}function $(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=M(e),o=function(e,t){for(var n,r,o,i,a=e.data,c=t[0],u=t[1],l=t[2],s=t[3],d=t[4],f=t[5],m=t[6],h=t[7],p=t[8],g=t[9],v=t[10],y=t[11],b=t[12],w=t[13],x=t[14],T=t[15],k=t[16],E=t[17],M=t[18],C=t[19],I=0;I<a.length;I+=4)n=a[I],r=a[I+1],o=a[I+2],i=a[I+3],a[I]=n*c+r*u+o*l+i*s+d,a[I+1]=n*f+r*m+o*h+i*p+g,a[I+2]=n*v+r*y+o*b+i*w+x,a[I+3]=n*T+r*k+o*E+i*M+C;return e}(r.getImageData(0,0,e.width,e.height),n);return r.putImageData(o,0,0),j(e,t)}(n,e.getType(),t)})}function W(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=M(e),o=r.getImageData(0,0,e.width,e.height),i=r.getImageData(0,0,e.width,e.height);return i=function(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}for(var o=Math.round(Math.sqrt(n.length)),i=Math.floor(o/2),a=e.data,c=t.data,u=e.width,l=e.height,s=0;s<l;s++)for(var d=0;d<u;d++){for(var f=0,m=0,h=0,p=0;p<o;p++)for(var g=0;g<o;g++){var v=r(d+g-i,0,u-1),y=4*(r(s+p-i,0,l-1)*u+v),b=n[p*o+g];f+=a[y]*b,m+=a[y+1]*b,h+=a[y+2]*b}var w=4*(s*u+d);c[w]=r(f,0,255),c[w+1]=r(m,0,255),c[w+2]=r(h,0,255)}return t}(o,i,n),r.putImageData(i,0,0),j(e,t)}(n,e.getType(),t)})}function q(e){return function(t,n){return t.toCanvas().then(function(r){return function(t,n,r){for(var o=M(t),i=new Array(256),a=0;a<i.length;a++)i[a]=e(a,r);var c=function(e,t){for(var n=e.data,r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}(o.getImageData(0,0,t.width,t.height),i);return o.putImageData(c,0,0),j(t,n)}(r,t.getType(),n)})}}function V(e){return function(t,n){return $(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}function Y(e){return function(t){return W(t,e)}}var X,J=(X=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(e){return $(e,X)}),K=V(function(e,t){return F(e,[1,0,0,0,t=B(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}),G=V(function(e,t){t=B(t,-180,180)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t);return F(e,[.213+.787*n+-.213*r,.715+-.715*n+-.715*r,.072+-.072*n+.928*r,0,0,.213+-.213*n+.143*r,.715+n*(1-.715)+.14*r,.072+-.072*n+-.283*r,0,0,.213+-.213*n+-.787*r,.715+-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,0,1,0,0,0,0,0,1])}),Z=V(function(e,t){var n=1+((t=B(t,-1,1))>0?3*t:t);return F(e,[.3086*(1-n)+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])}),Q=V(function(e,t){var n;return t=B(t,-1,1),F(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?z[t]:z[Math.floor(t)]*(1-n)+z[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}),ee=V(function(e,t){return F(e,H([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=B(t,0,1)))}),te=V(function(e,t){return F(e,H([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=B(t,0,1)))}),ne=function(e,t,n,r){return $(e,function(e,t,n,r){return F(e,[t=B(t,0,2),0,0,0,0,0,n=B(n,0,2),0,0,0,0,0,r=B(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t,n,r))},re=Y([0,-1,0,-1,5,-1,0,-1,0]),oe=Y([-2,-1,0,-1,1,1,0,1,2]),ie=q(function(e,t){return 255*Math.pow(e/255,1-t)}),ae=q(function(e,t){return 255*(1-Math.exp(-e/255*t))});function ce(e,t,n){var r=I(e),o=R(e),i=t/r,a=n/o,c=!1;(i<.5||i>2)&&(i=i<.5?.5:2,c=!0),(a<.5||a>2)&&(a=a<.5?.5:2,c=!0);var u=function(e,t,n){return new N(function(r){var o=I(e),i=R(e),a=Math.floor(o*t),c=Math.floor(i*n),u=k(a,c);M(u).drawImage(e,0,0,o,i,0,0,a,c),r(u)})}(e,i,a);return c?u.then(function(e){return ce(e,t,n)}):u}function ue(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=k(e.width,e.height),o=M(r),i=0,a=0;return 90!==(n=n<0?360+n:n)&&270!==n||C(r,r.height,r.width),90!==n&&180!==n||(i=r.width),270!==n&&180!==n||(a=r.height),o.translate(i,a),o.rotate(n*Math.PI/180),o.drawImage(e,0,0),j(r,t)}(n,e.getType(),t)})}function le(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=k(e.width,e.height),o=M(r);return"v"===n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),j(r,t)}(n,e.getType(),t)})}function se(e,t,n,r,o){return e.toCanvas().then(function(i){return function(e,t,n,r,o,i){var a=k(o,i);return M(a).drawImage(e,-n,-r),j(a,t)}(i,e.getType(),t,n,r,o)})}var de=function(e){return J(e)},fe=function(e){return re(e)},me=function(e){return oe(e)},he=function(e,t){return ie(e,t)},pe=function(e,t){return ae(e,t)},ge=function(e,t,n,r){return ne(e,t,n,r)},ve=function(e,t){return K(e,t)},ye=function(e,t){return G(e,t)},be=function(e,t){return Z(e,t)},we=function(e,t){return Q(e,t)},xe=function(e,t){return ee(e,t)},Te=function(e,t){return te(e,t)},ke=function(e,t){return le(e,t)},Ee=function(e,t,n,r,o){return se(e,t,n,r,o)},Me=function(e,t,n){return function(e,t,n){return e.toCanvas().then(function(r){return ce(r,t,n).then(function(t){return j(t,e.getType())})})}(e,t,n)},Ce=function(e,t){return ue(e,t)},Ie=function(e){return L(e)},Re=function(){return w.getOrDie("URL")},Ne={createObjectURL:function(e){return Re().createObjectURL(e)},revokeObjectURL:function(e){Re().revokeObjectURL(e)}},Ae=tinymce.util.Tools.resolve("tinymce.util.Delay"),_e=tinymce.util.Tools.resolve("tinymce.util.Promise"),Se=tinymce.util.Tools.resolve("tinymce.util.URI"),Oe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Pe=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Ue=tinymce.util.Tools.resolve("tinymce.geom.Rect"),De=function(e){return new _e(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},Le=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),je=tinymce.util.Tools.resolve("tinymce.util.Observable"),Be=tinymce.util.Tools.resolve("tinymce.util.VK"),ze=0,Fe={create:function(t){return new(Pe.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(t){var n=this,r=new e.Image;r.src=t,De(r).then(function(){var t,o,i=n.state.get("viewRect");if((o=n.$el.find("img"))[0])o.replaceWith(r);else{var a=e.document.createElement("div");a.className="mce-imagepanel-bg",n.getEl().appendChild(a),n.getEl().appendChild(r)}t={x:0,y:0,w:r.naturalWidth,h:r.naturalHeight},n.state.set("viewRect",t),n.state.set("rect",Ue.inflate(t,-20,-20)),i&&i.w===t.w&&i.h===t.h||n.zoomFit(),n.repaintImage(),n.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i;e=this.$el.find("img"),t=this.getEl().clientWidth,n=this.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,(i=Math.min((t-10)/r,(n-10)/o))>=1&&(i=1),this.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,c,u,l,s;s=this.getEl(),u=this.zoom(),l=this.state.get("rect"),a=this.$el.find("img"),c=this.$el.find(".mce-imagepanel-bg"),o=s.offsetWidth,i=s.offsetHeight,n=a[0].naturalWidth*u,r=a[0].naturalHeight*u,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),c.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:l.x*u+e,y:l.y*u+t,w:l.w*u,h:l.h*u}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){var e=this;function t(t){e.cropRect=function(e,t,n,o,i){var a,c,u,l,s="mce-",d=s+"crid-"+ze++;function f(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(t,r,o,i){var c,u,l,s,d;c=r.x,u=r.y,l=r.w,s=r.h,c+=o*t.deltaX,u+=i*t.deltaY,(l+=o*t.deltaW)<20&&(l=20),(s+=i*t.deltaH)<20&&(s=20),d=e=Ue.clamp({x:c,y:u,w:l,h:s},n,"move"===t.name),d=f(n,d),a.fire("updateRect",{rect:d}),g(d)}function h(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),Le("#"+d+"-"+e,o).css({left:t.x,top:t.y,width:t.w,height:t.h})}r.each(c,function(t){Le("#"+d+"-"+t.name,o).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function p(t){h(e=t)}function g(e){var t,r;p((t=n,{x:(r=e).x+t.x,y:r.y+t.y,w:r.w,h:r.h}))}return c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],l=["top","right","bottom","left"],Le('<div id="'+d+'" class="'+s+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),r.each(l,function(e){Le("#"+d,o).append('<div id="'+d+"-"+e+'"class="'+s+'croprect-block" style="display: none" data-mce-bogus="all">')}),r.each(c,function(e){Le("#"+d,o).append('<div id="'+d+"-"+e.name+'" class="'+s+"croprect-handle "+s+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),u=r.map(c,function(t){var n;return new(Pe.get("DragHelper"))(d,{document:o.ownerDocument,handle:d+"-"+t.name,start:function(){n=e},drag:function(e){m(t,n,e.deltaX,e.deltaY)}})}),h(e),Le(o).on("focusin focusout",function(e){Le(e.target).attr("aria-grabbed","focus"===e.type)}),Le(o).on("keydown",function(t){var n;function o(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),m(n,r,o,i)}switch(r.each(c,function(e){if(t.target.id===d+"-"+e.name)return n=e,!1}),t.keyCode){case Be.LEFT:o(t,0,e,-10,0);break;case Be.RIGHT:o(t,0,e,10,0);break;case Be.UP:o(t,0,e,0,-10);break;case Be.DOWN:o(t,0,e,0,10);break;case Be.ENTER:case Be.SPACEBAR:t.preventDefault(),i()}}),a=r.extend({toggleVisibility:function(e){var t;t=r.map(c,function(e){return"#"+d+"-"+e.name}).concat(r.map(l,function(e){return"#"+d+"-"+e})).join(","),e?Le(t,o).show():Le(t,o).hide()},setClampRect:function(t){n=t,h(e)},setRect:p,getInnerRect:function(){return f(n,e)},setInnerRect:g,setViewPortRect:function(n){t=n,h(e)},destroy:function(){r.each(u,function(e){e.destroy()}),u=[]}},je)}(t,e.state.get("viewRect"),e.state.get("viewRect"),e.getEl(),function(){e.fire("crop")}),e.cropRect.on("updateRect",function(t){var n=t.rect,r=e.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},e.state.set("rect",n)}),e.on("remove",e.cropRect.destroy)}e.state.on("change:cropEnabled",function(t){e.cropRect.toggleVisibility(t.value),e.repaintImage()}),e.state.on("change:zoom",function(){e.repaintImage()}),e.state.on("change:rect",function(n){var r=n.value;e.cropRect||t(r),e.cropRect.setRect(r)})}}))(t)}};function He(e){return{blob:e,url:Ne.createObjectURL(e)}}function $e(e){e&&Ne.revokeObjectURL(e.url)}function We(e){r.each(e,$e)}function qe(e,t,n,o){var i,a,c,u,l,s,d,f,m,h,p,g,v,y,b,w,x,T,k,E,M,C,I,R,N,A,_,S=function(){var e=[],t=-1;function n(){return t>0}function r(){return-1!==t&&t<e.length-1}return{data:e,add:function(n){var r;return r=e.splice(++t),e.push(n),{state:n,removed:r}},undo:function(){if(n())return e[--t]},redo:function(){if(r())return e[++t]},canUndo:n,canRedo:r}}(),O=function(t){return e.rtl?t.reverse():t};function P(e){var t,n,r,o;t=i.find("#w")[0],n=i.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),i.find("#constrain")[0].checked()&&R&&N&&r&&o&&("w"===e.control.settings.name?(o=Math.round(r*A),n.value(o)):(r=Math.round(o*_),t.value(r))),R=r,N=o}function U(e){return Math.round(100*e)+"%"}function D(){i.find("#undo").disabled(!S.canUndo()),i.find("#redo").disabled(!S.canRedo()),i.statusbar.find("#save").disabled(!S.canUndo())}function L(){i.find("#undo").disabled(!0),i.find("#redo").disabled(!0)}function j(e){e&&f.imageSrc(e.url)}function B(e){return function(){var t=r.grep(I,function(t){return t.settings.name!==e});r.each(t,function(e){e.hide()}),e.show(),e.focus()}}function z(e){j(u=He(e))}function F(e){j(t=He(e)),We(S.add(t).removed),D()}function H(){var e=f.selection();Ie(t.blob).then(function(t){Ee(t,e.x,e.y,e.w,e.h).then(Y).then(function(e){F(e),W()})})}var $=function(e){var n=[].slice.call(arguments,1);return function(){Ie((u||t).blob).then(function(t){e.apply(this,[t].concat(n)).then(Y).then(z)})}};function W(){j(t),$e(u),B(a)(),D()}function q(){u?(F(u.blob),W()):function t(n,r){u?r():setTimeout(function(){n-- >0?t(n,r):e.windowManager.alert("Error: failed to apply image operation.")},10)}(100,q)}function V(e){return Pe.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}var Y=function(e){return e.toBlob()};function X(e,n){return V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:q}])).hide().on("show",function(){L(),Ie(t.blob).then(function(e){return n(e)}).then(Y).then(function(e){var t=He(e);j(t),$e(u),u=t})})}function J(n,r,o,i,a){return V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){!function(e){Ie(t.blob).then(function(t){return r(t,e)}).then(Y).then(function(e){var t=He(e);j(t),$e(u),u=t})}(e.value)},minValue:e.rtl?a:i,maxValue:e.rtl?i:a,value:o,previewFilter:U},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:q}])).hide().on("show",function(){this.find("slider").value(o),L()})}l=V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:H}])).hide().on("show hide",function(e){f.toggleCropRect("show"===e.type)}).on("show",L),s=V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:P},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:P},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(e){!0===e.control.value()&&(A=N/R,_=R/N)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(e){var n=parseInt(i.find("#w").value(),10),r=parseInt(i.find("#h").value(),10);e.preventDefault(),function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments,1);return function(){Ie(t.blob).then(function(t){e.apply(this,[t].concat(o)).then(Y).then(F)})}}(Me,n,r)(),W()}).on("show",L),d=V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:$(ke,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:$(ke,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:$(Ce,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:$(Ce,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:q}])).hide().on("show",L),p=X(0,de),k=X(0,fe),E=X(0,me),g=J(0,ve,0,-1,1),v=J(0,ye,180,0,360),y=J(0,be,0,-1,1),b=J(0,we,0,-1,1),w=J(0,xe,0,0,1),x=J(0,Te,0,0,1),T=function(n,r){function o(){var e,n,o;e=i.find("#r")[0].value(),n=i.find("#g")[0].value(),o=i.find("#b")[0].value(),Ie(t.blob).then(function(t){return r(t,e,n,o)}).then(Y).then(function(e){var t=He(e);j(t),$e(u),u=t})}var a=e.rtl?2:0,c=e.rtl?0:2;return V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:a,value:1,maxValue:c,ondragend:o,previewFilter:U},{type:"slider",label:"G",name:"g",minValue:a,value:1,maxValue:c,ondragend:o,previewFilter:U},{type:"slider",label:"B",name:"b",minValue:a,value:1,maxValue:c,ondragend:o,previewFilter:U},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:q}])).hide().on("show",function(){i.find("#r,#g,#b").value(1),L()})}(0,ge),M=J(0,he,0,-1,1),C=J(0,pe,1,0,2),c=V(O([{text:"Back",onclick:W},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:B(v)},{text:"saturate",icon:"saturate",onclick:B(y)},{text:"sepia",icon:"sepia",onclick:B(x)},{text:"emboss",icon:"emboss",onclick:B(E)},{text:"exposure",icon:"exposure",onclick:B(C)},{type:"spacer",flex:1}])).hide(),a=V(O([{tooltip:"Crop",icon:"crop",onclick:B(l)},{tooltip:"Resize",icon:"resize2",onclick:B(s)},{tooltip:"Orientation",icon:"orientation",onclick:B(d)},{tooltip:"Brightness",icon:"sun",onclick:B(g)},{tooltip:"Sharpen",icon:"sharpen",onclick:B(k)},{tooltip:"Contrast",icon:"contrast",onclick:B(b)},{tooltip:"Color levels",icon:"drop",onclick:B(T)},{tooltip:"Gamma",icon:"gamma",onclick:B(M)},{tooltip:"Invert",icon:"invert",onclick:B(p)}])),f=Fe.create({flex:1,imageSrc:t.url}),m=Pe.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:function(){j(t=S.undo()),D()}},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:function(){j(t=S.redo()),D()}},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:function(){var e=f.zoom();e<2&&(e+=.1),f.zoom(e)}},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var e=f.zoom();e>.1&&(e-=.1),f.zoom(e)}}]}),h=Pe.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:O([m,f])}),I=[a,l,s,d,c,p,g,v,y,b,w,x,T,k,E,M,C],(i=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(Oe.DOM.getViewPort().w,800),minHeight:Math.min(Oe.DOM.getViewPort().h,650),title:"Edit image",items:I.concat([h]),buttons:O([{text:"Save",name:"save",subtype:"primary",onclick:function(){n(t.blob),i.close()}},{text:"Cancel",onclick:"close"}])})).on("close",function(){o(),We(S.data),S=null,u=null}),S.add(t),D(),f.on("load",function(){R=f.imageSize().w,N=f.imageSize().h,A=N/R,_=R/N,i.find("#w").value(R),i.find("#h").value(N)}),f.on("crop",H)}var Ve,Ye={edit:function(e,t){return new _e(function(n,r){return t.toBlob().then(function(t){qe(e,He(t),n,r)})})}},Xe={getImageSize:function(e){var t,n;function r(e){return/^[0-9\.]+px$/.test(e)}return t=e.style.width,n=e.style.height,t||n?r(t)&&r(n)?{w:parseInt(t,10),h:parseInt(n,10)}:null:(t=e.width,n=e.height,t&&n?{w:parseInt(t,10),h:parseInt(n,10)}:null)},setImageSize:function(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))},getNaturalImageSize:function(e){return{w:e.naturalWidth,h:e.naturalHeight}}},Je=(Ve="function",function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===Ve}),Ke=(Array.prototype.slice,function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return v.some(o)}return v.none()});Je(Array.from)&&Array.from;var Ge=function(e){return null!=e},Ze={traverse:function(e,t){var n;return n=t.reduce(function(e,t){return Ge(e)?e[t]:void 0},e),Ge(n)?n:null},readBlob:function(e){return new _e(function(t){var n=x();n.onload=function(e){var n=e.target;t(n.result)},n.readAsText(e)})},requestUrlAsBlob:function(e,t,n){return new _e(function(o){var i;(i=new(w.getOrDie("XMLHttpRequest"))).onreadystatechange=function(){4===i.readyState&&o({status:i.status,blob:this.response})},i.open("GET",e,!0),i.withCredentials=n,r.each(t,function(e,t){i.setRequestHeader(t,e)}),i.responseType="blob",i.send()})},parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}},Qe=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],et=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],tt=function(e){return"ImageProxy HTTP error: "+Ke(Qe,function(t){return e===t.code}).fold(o("Unknown ImageProxy error"),function(e){return e.message})},nt=function(e){var t=tt(e);return _e.reject(t)},rt=function(e){return Ke(et,function(t){return t.type===e}).fold(o("Unknown service error"),function(e){return e.message})},ot=function(e,t){return Ze.readBlob(t).then(function(e){var t=function(e){var t=Ze.parseJson(e),n=Ze.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?rt(n):"Invalid JSON in service error message")}(e);return _e.reject(t)})},it={handleServiceErrorResponse:function(e,t){return 400===(n=e)||403===n||500===n?ot(0,t):nt(e);var n},handleHttpError:nt,getHttpErrorMsg:tt,getServiceErrorMsg:rt},at=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return Ze.requestUrlAsBlob(function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)}(e,t),n,!1).then(function(e){return e.status<200||e.status>=300?it.handleServiceErrorResponse(e.status,e.blob):_e.resolve(e.blob)})},ct=function(e,t,n){return t?at(e,t):function(e,t){return Ze.requestUrlAsBlob(e,{},t).then(function(e){return e.status<200||e.status>=300?it.handleHttpError(e.status):_e.resolve(e.blob)})}(e,n)},ut=0,lt=function(e,t){e.notificationManager.open({text:t,type:"error"})},st=function(e){return e.selection.getNode()},dt=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new Se(n).host===e.documentBaseURI.host},ft=function(e,t){return-1!==r.inArray(function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")}(e),new Se(t.src).host)},mt=function(e,t){var n,o=t.src;return ft(e,t)?ct(t.src,null,function(e,t){return-1!==r.inArray(function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")}(e),new Se(t.src).host)}(e,t)):dt(e,t)?A(t):(o=function(e){return e.getParam("imagetools_proxy")}(e),o+=(-1===o.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),n=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")}(e),ct(o,n,!1))},ht=function(e){var t;return(t=e.editorUpload.blobCache.getByUri(st(e).src))?_e.resolve(t.blob()):mt(e,st(e))},pt=function(e,t){var n=Ae.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},function(e){return e.getParam("images_upload_timeout",3e4,"number")}(e));t.set(n)},gt=function(e){clearTimeout(e.get())},vt=function(e,t,n,r,o){return t.toBlob().then(function(i){var a,c,u,l,s;return u=e.editorUpload.blobCache,a=(s=st(e)).src,function(e){return e.getParam("images_reuse_filename",!1,"boolean")}(e)&&((l=u.getByUri(a))?(a=l.uri(),c=l.name()):c=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null}(e,a)),l=u.create({id:"imagetools"+ut++,blob:i,base64:t.toBase64(),uri:a,name:c}),u.add(l),e.undoManager.transact(function(){e.$(s).on("load",function t(){e.$(s).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(gt(r),pt(e,r))}),o&&e.$(s).attr({width:o.w,height:o.h}),e.$(s).attr({src:l.blobUri()}).removeAttr("data-mce-src")}),l})},yt=function(e,t,n,r){return function(){return e._scanForImages().then(i(ht,e)).then(Ie).then(n).then(function(n){return vt(e,n,!1,t,r)},function(t){lt(e,t)})}},bt={rotate:function(e,t,n){return function(){var r=Xe.getImageSize(st(e)),o=r?{w:r.h,h:r.w}:null;return yt(e,t,function(e){return Ce(e,n)},o)()}},flip:function(e,t,n){return function(){return yt(e,t,function(e){return ke(e,n)})()}},editImageDialog:function(e,t){return function(){var n=st(e),r=Xe.getNaturalImageSize(n),o=function(e){return new _e(function(t){(function(e){return _(e)})(e).then(function(o){var i=Xe.getNaturalImageSize(o);r.w===i.w&&r.h===i.h||Xe.getImageSize(n)&&Xe.setImageSize(n,i),Ne.revokeObjectURL(o.src),t(e)})})};ht(e).then(Ie).then(i(function(e,n){return Ye.edit(e,n).then(o).then(Ie).then(function(n){return vt(e,n,!0,t)},function(){})},e),function(t){lt(e,t)})}},isEditableImage:function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(dt(e,t)||ft(e,t)||e.settings.imagetools_proxy)},cancelTimedUpload:gt},wt=function(e,t){r.each({mceImageRotateLeft:bt.rotate(e,t,-90),mceImageRotateRight:bt.rotate(e,t,90),mceImageFlipVertical:bt.flip(e,t,"v"),mceImageFlipHorizontal:bt.flip(e,t,"h"),mceEditImage:bt.editImageDialog(e,t)},function(t,n){e.addCommand(n,t)})},xt=function(e,t,n){e.on("NodeChange",function(r){var o=n.get();o&&o.src!==r.element.src&&(bt.cancelTimedUpload(t),e.editorUpload.uploadImagesAuto(),n.set(null)),bt.isEditableImage(e,r.element)&&n.set(r.element)})},Tt=function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},kt=function(e){e.addContextToolbar(i(bt.isEditableImage,e),function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")}(e))};n.add("imagetools",function(e){var n=t(0),r=t(null);wt(e,n),Tt(e),kt(e),xt(e,n,r)})}(window)},65:function(e,t,n){n(66)},66:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){return e.fire("insertCustomChar",{chr:t})},n=function(e,n){var r=t(e,n).chr;e.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.settings.charmap},i=function(e){return e.settings.charmap_append},a=r.isArray,c=function(e){return a(e)?[].concat(function(e){return r.grep(e,function(e){return a(e)&&2===e.length})}(e)):"function"==typeof e?e():[]},u=function(e){return function(e,t){var n=o(e);n&&(t=c(n));var r=i(e);return r?[].concat(t).concat(c(r)):t}(e,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},l=function(e){return{getCharMap:function(){return u(e)},insertChar:function(t){n(e,t)}}},s=function(e){var t,n,r,o=Math.min(e.length,25),i=Math.ceil(e.length/o);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<i;r++){for(t+="<tr>",n=0;n<o;n++){var a=r*o+n;if(a<e.length){var c=e[a],u=parseInt(c[0],10),l=c?String.fromCharCode(u):"&nbsp;";t+='<td title="'+c[1]+'"><div tabindex="-1" title="'+c[1]+'" role="button" data-chr="'+u+'">'+l+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+="</tbody></table>"},d=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},f=function(e){var t,r={type:"container",html:s(u(e)),onclick:function(r){var o=r.target;if(/^(TD|DIV)$/.test(o.nodeName)){var i=d(o).firstChild;if(i&&i.hasAttribute("data-chr")){var a=i.getAttribute("data-chr"),c=parseInt(a,10);isNaN(c)||n(e,String.fromCharCode(c)),r.ctrlKey||t.close()}}},onmouseover:function(e){var n=d(e.target);n&&n.firstChild?(t.find("#preview").text(n.firstChild.firstChild.data),t.find("#previewTitle").text(n.title)):(t.find("#preview").text(" "),t.find("#previewTitle").text(" "))}};t=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){t.close()}}]})},m=function(e){e.addCommand("mceShowCharmap",function(){f(e)})},h=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};e.add("charmap",function(e){return m(e),h(e),l(e)})}()},67:function(e,t,n){n(68)},68:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},n=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};e.add("hr",function(e){t(e),n(e)})}()},69:function(e,t){!function(e){e.remove(),e=null;var t={path_absolute:"/",menubar:!1,selector:"textarea.richTextBox",min_height:300,skin_url:$('meta[name="assets-path"]').attr("content")+"?path=js/skins/voyager",plugins:"insertdatetime, advlist, wordcount, imagetools, searchreplace, autolink, hr, charmap, preview, link, image, code, table, textcolor, lists, media",toolbar:"preview searchreplace | styleselect bold italic underline charmap hr | forecolor backcolor | alignleft aligncenter alignright | bullist numlist outdent indent | link image media table | insertdatetime code",relative_urls:!1,file_browser_callback:function(e,n,r,o){var i=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,c=t.path_absolute+"filemanager?field_name="+e;c+="image"==r?"&type=Images":"&type=Files",tinyMCE.activeEditor.windowManager.open({file:c,title:"Filemanager",width:.8*i,height:.8*a,resizable:"yes",close_previous:"no"})},convert_urls:!1,image_caption:!0,image_title:!0};tinymce.init(t)}(tinymce)},70:function(e,t){$(".panel-collapse").on("hide.bs.collapse",function(e){var t=$(event.target);t.is("a")||(t=t.parent()),t.hasClass("collapsed")&&(e.stopPropagation(),e.preventDefault())})},71:function(e,t){$(document).ready(function(){$("#bulk_active_btn").click(function(){var e=$("#dataTable input[type=checkbox]:checked").not(".select_all"),t=$(this).data("name"),n=$(this).data("model-statut"),r=$(this).data("model-name"),o=$(this).data("translation-name"),i=$(this).data("translation-name-success"),a=e.length,c=[];a?($.each(e,function(){var e=$(this).val();c.push(e)}),$.post({url:"/admin/voyagerbaseextend/ajax/statut",data:{bulk_ids:c,bulk_active_model_statut:n,bulk_active_name:t,bulk_active_model_name:r,count:a},success:function(e){window.location.href=e,toastr.success(i)},error:function(e){console.log("error "+e)}})):toastr.warning(o)}),$("#bulk_disable_btn").click(function(){var e=$("#dataTable input[type=checkbox]:checked").not(".select_all"),t=$(this).data("name"),n=$(this).data("model-statut"),r=$(this).data("model-name"),o=$(this).data("translation-name"),i=$(this).data("translation-name-success"),a=e.length,c=[];a?($.each(e,function(){var e=$(this).val();c.push(e)}),$.post({url:"/admin/voyagerbaseextend/ajax/statut",data:{bulk_ids:c,bulk_active_model_statut:n,bulk_active_name:t,bulk_active_model_name:r,count:a},success:function(e){window.location.href=e,toastr.success(i)},error:function(e){console.log("error "+e)}})):toastr.warning(o)})})}});